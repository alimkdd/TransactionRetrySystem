2025-11-19 10:16:32.173 +02:00 [INF] Executed DbCommand (503ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [TransactionRetrySystem];
2025-11-19 10:16:32.593 +02:00 [INF] Executed DbCommand (364ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [TransactionRetrySystem] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-11-19 10:16:32.636 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 10:16:32.761 +02:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-19 10:16:32.764 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 10:16:32.782 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 10:16:32.814 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-19 10:16:32.829 +02:00 [INF] Applying migration '20251119081615_InitialMigration'.
2025-11-19 10:16:32.861 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CircuitBreakerStates] (
    [Id] int NOT NULL IDENTITY,
    [Gateway] nvarchar(max) NULL,
    [FailureCount] int NOT NULL,
    [LastFailureTime] datetime2 NOT NULL,
    [State] int NOT NULL,
    CONSTRAINT [PK_CircuitBreakerStates] PRIMARY KEY ([Id])
);
2025-11-19 10:16:32.865 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RetryQueue] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [ScheduledRetryTime] datetime2 NOT NULL,
    [RetryCount] int NOT NULL,
    [Status] int NOT NULL,
    CONSTRAINT [PK_RetryQueue] PRIMARY KEY ([Id])
);
2025-11-19 10:16:32.874 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TransactionAttempts] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [AttemptNumber] int NOT NULL,
    [Status] int NOT NULL,
    [ErrorType] int NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [AttemptedAt] datetime2 NOT NULL,
    [ResponseTime] time NULL,
    [GatewayResponse] nvarchar(max) NULL,
    CONSTRAINT [PK_TransactionAttempts] PRIMARY KEY ([Id])
);
2025-11-19 10:16:32.885 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119081615_InitialMigration', N'8.0.0');
2025-11-19 13:45:54.482 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 13:45:54.515 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 13:45:54.516 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 13:45:54.565 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-19 13:45:54.566 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 13:45:54.568 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 13:45:54.577 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-19 13:45:54.585 +02:00 [INF] Applying migration '20251119114546_InitialMigration'.
2025-11-19 13:45:54.612 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CircuitBreakerStates] (
    [Id] int NOT NULL IDENTITY,
    [Gateway] nvarchar(max) NULL,
    [FailureCount] int NOT NULL,
    [LastFailureTime] datetime2 NOT NULL,
    [State] int NOT NULL,
    CONSTRAINT [PK_CircuitBreakerStates] PRIMARY KEY ([Id])
);
2025-11-19 13:45:54.614 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RetryQueue] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [ScheduledRetryTime] datetime2 NOT NULL,
    [RetryCount] int NOT NULL,
    [Status] int NOT NULL,
    CONSTRAINT [PK_RetryQueue] PRIMARY KEY ([Id])
);
2025-11-19 13:45:54.616 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TransactionAttempts] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [TransactionId] int NOT NULL,
    [AttemptNumber] int NOT NULL,
    [Status] int NOT NULL,
    [NotificationStatus] int NOT NULL,
    [ErrorType] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [AttemptedAt] datetime2 NOT NULL,
    [ResponseTime] time NULL,
    [GatewayResponse] nvarchar(max) NULL,
    CONSTRAINT [PK_TransactionAttempts] PRIMARY KEY ([Id])
);
2025-11-19 13:45:54.621 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119114546_InitialMigration', N'8.0.0');
2025-11-19 13:48:55.166 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 13:48:55.518 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 13:48:55.520 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 13:48:55.588 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 13:48:55.594 +02:00 [INF] Hosting environment: Development
2025-11-19 13:48:55.596 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 13:48:55.829 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 13:48:56.823 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger - null null
2025-11-19 13:48:57.023 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger - 301 null null 215.6894ms
2025-11-19 13:48:57.038 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 13:48:57.170 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - null null
2025-11-19 13:48:57.171 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - null null
2025-11-19 13:48:57.171 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - null null
2025-11-19 13:48:57.175 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 138.0737ms
2025-11-19 13:48:57.187 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 13:48:57.187 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 13:48:57.213 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 26.9034ms
2025-11-19 13:48:57.227 +02:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-11-19 13:48:57.228 +02:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-11-19 13:48:57.235 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 63.9936ms
2025-11-19 13:48:57.237 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui.css - 200 152034 text/css 66.9308ms
2025-11-19 13:48:57.271 +02:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-11-19 13:48:57.273 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 102.9916ms
2025-11-19 13:48:57.306 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 119.898ms
2025-11-19 13:48:57.379 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 13:48:57.396 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/favicon-32x32.png - null null
2025-11-19 13:48:57.399 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.759ms
2025-11-19 13:48:57.403 +02:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-11-19 13:48:57.408 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/favicon-32x32.png - 200 628 image/png 11.9629ms
2025-11-19 13:56:28.754 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 13:56:28.800 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 13:56:28.801 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 13:56:28.858 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-19 13:56:28.859 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 13:56:28.861 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 13:56:28.876 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-19 13:56:28.887 +02:00 [INF] Applying migration '20251119115620_InitialMigration'.
2025-11-19 13:56:28.949 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CircuitBreakerStates] (
    [Id] int NOT NULL IDENTITY,
    [Gateway] nvarchar(max) NULL,
    [FailureCount] int NOT NULL,
    [LastFailureTime] datetime2 NOT NULL,
    [State] int NOT NULL,
    CONSTRAINT [PK_CircuitBreakerStates] PRIMARY KEY ([Id])
);
2025-11-19 13:56:28.953 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RetryQueue] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [ScheduledRetryTime] datetime2 NOT NULL,
    [RetryCount] int NOT NULL,
    [Status] int NOT NULL,
    CONSTRAINT [PK_RetryQueue] PRIMARY KEY ([Id])
);
2025-11-19 13:56:28.955 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TransactionAttempts] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [TransactionId] int NOT NULL,
    [AttemptNumber] int NOT NULL,
    [Status] int NOT NULL,
    [NotificationStatus] int NOT NULL,
    [ErrorType] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [AttemptedAt] datetime2 NOT NULL,
    [ResponseTime] time NULL,
    [GatewayResponse] nvarchar(max) NULL,
    CONSTRAINT [PK_TransactionAttempts] PRIMARY KEY ([Id])
);
2025-11-19 13:56:28.959 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119115620_InitialMigration', N'8.0.0');
2025-11-19 13:57:27.097 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 13:57:27.183 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 13:57:32.134 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 13:57:32.327 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 13:57:32.340 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 13:57:32.341 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 13:57:32.383 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-19 13:57:32.384 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 13:57:32.385 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 13:57:32.388 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-19 13:57:32.396 +02:00 [INF] Applying migration '20251119115727_InitialMigration'.
2025-11-19 13:57:32.422 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CircuitBreakerStates] (
    [Id] int NOT NULL IDENTITY,
    [Gateway] nvarchar(max) NULL,
    [FailureCount] int NOT NULL,
    [LastFailureTime] datetime2 NOT NULL,
    [State] int NOT NULL,
    CONSTRAINT [PK_CircuitBreakerStates] PRIMARY KEY ([Id])
);
2025-11-19 13:57:32.425 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RetryQueue] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [ScheduledRetryTime] datetime2 NOT NULL,
    [RetryCount] int NOT NULL,
    [Status] int NOT NULL,
    CONSTRAINT [PK_RetryQueue] PRIMARY KEY ([Id])
);
2025-11-19 13:57:32.430 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-11-19 13:57:32.437 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Transactions] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Gateway] nvarchar(max) NULL,
    [Status] int NOT NULL,
    [ErrorType] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Transactions_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-19 13:57:32.442 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TransactionAttempts] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [TransactionId] int NOT NULL,
    [AttemptNumber] int NOT NULL,
    [Status] int NOT NULL,
    [NotificationStatus] int NOT NULL,
    [ErrorType] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [AttemptedAt] datetime2 NOT NULL,
    [ResponseTime] time NULL,
    [GatewayResponse] nvarchar(max) NULL,
    CONSTRAINT [PK_TransactionAttempts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TransactionAttempts_Transactions_TransactionId] FOREIGN KEY ([TransactionId]) REFERENCES [Transactions] ([Id]) ON DELETE CASCADE
);
2025-11-19 13:57:32.450 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_TransactionId] ON [TransactionAttempts] ([TransactionId]);
2025-11-19 13:57:32.452 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_UserId] ON [Transactions] ([UserId]);
2025-11-19 13:57:32.455 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119115727_InitialMigration', N'8.0.0');
2025-11-19 13:58:21.620 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 13:58:22.321 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 13:59:58.788 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 13:59:59.457 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:00:46.974 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:00:47.624 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:02:03.882 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:02:04.491 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:02:13.306 +02:00 [INF] Executed DbCommand (68ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2)) AS i ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorType], [Gateway], [Status], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorType], [Gateway], [Status], [UserId])
VALUES (i.[Amount], i.[CreatedAt], i.[Currency], i.[Description], i.[ErrorMessage], i.[ErrorType], i.[Gateway], i.[Status], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 14:02:13.381 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'TransactionRetrySystem.Infrastructure.Context.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Users_UserId". The conflict occurred in database "TransactionRetrySystem", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f068d809-af96-48d8-b57d-efbc05e413e4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Users_UserId". The conflict occurred in database "TransactionRetrySystem", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f068d809-af96-48d8-b57d-efbc05e413e4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-19 14:02:38.729 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:02:39.365 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:02:39.706 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Users] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2)) AS i ([Email], [FullName], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Email], [FullName])
VALUES (i.[Email], i.[FullName])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 14:02:39.745 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:02:39.829 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2)) AS i ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorType], [Gateway], [Status], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorType], [Gateway], [Status], [UserId])
VALUES (i.[Amount], i.[CreatedAt], i.[Currency], i.[Description], i.[ErrorMessage], i.[ErrorType], i.[Gateway], i.[Status], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 14:02:39.847 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:02:39.932 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (DbType = Time), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = Time), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = Int32), @p26='?' (DbType = Time), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [TransactionAttempts] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, 0),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, 1),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 2)) AS i ([AttemptNumber], [AttemptedAt], [ErrorMessage], [ErrorType], [GatewayResponse], [NotificationStatus], [ResponseTime], [Status], [TransactionId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AttemptNumber], [AttemptedAt], [ErrorMessage], [ErrorType], [GatewayResponse], [NotificationStatus], [ResponseTime], [Status], [TransactionId], [UserId])
VALUES (i.[AttemptNumber], i.[AttemptedAt], i.[ErrorMessage], i.[ErrorType], i.[GatewayResponse], i.[NotificationStatus], i.[ResponseTime], i.[Status], i.[TransactionId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 14:02:39.979 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'TransactionRetrySystem.Infrastructure.Context.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_TransactionAttempts_Transactions_TransactionId". The conflict occurred in database "TransactionRetrySystem", table "dbo.Transactions", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa5c41b-b37e-4a15-b0ae-769570429c22
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_TransactionAttempts_Transactions_TransactionId". The conflict occurred in database "TransactionRetrySystem", table "dbo.Transactions", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4aa5c41b-b37e-4a15-b0ae-769570429c22
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-19 14:03:07.350 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:03:08.053 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:03:08.095 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:03:08.454 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (DbType = Time), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = Time), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = Int32), @p26='?' (DbType = Time), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [TransactionAttempts] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, 0),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, 1),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 2)) AS i ([AttemptNumber], [AttemptedAt], [ErrorMessage], [ErrorType], [GatewayResponse], [NotificationStatus], [ResponseTime], [Status], [TransactionId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AttemptNumber], [AttemptedAt], [ErrorMessage], [ErrorType], [GatewayResponse], [NotificationStatus], [ResponseTime], [Status], [TransactionId], [UserId])
VALUES (i.[AttemptNumber], i.[AttemptedAt], i.[ErrorMessage], i.[ErrorType], i.[GatewayResponse], i.[NotificationStatus], i.[ResponseTime], i.[Status], i.[TransactionId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 14:03:08.509 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'TransactionRetrySystem.Infrastructure.Context.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_TransactionAttempts_Transactions_TransactionId". The conflict occurred in database "TransactionRetrySystem", table "dbo.Transactions", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c7790acd-3c77-45aa-ae67-665846224535
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_TransactionAttempts_Transactions_TransactionId". The conflict occurred in database "TransactionRetrySystem", table "dbo.Transactions", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c7790acd-3c77-45aa-ae67-665846224535
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-19 14:04:59.620 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:04:59.713 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:05:04.266 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:05:04.460 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 14:05:04.472 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 14:05:04.473 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 14:05:04.516 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-19 14:05:04.517 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 14:05:04.518 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 14:05:04.521 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-19 14:05:04.529 +02:00 [INF] Applying migration '20251119120459_InitialMigration'.
2025-11-19 14:05:04.554 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CircuitBreakerStates] (
    [Id] int NOT NULL IDENTITY,
    [Gateway] nvarchar(max) NULL,
    [FailureCount] int NOT NULL,
    [LastFailureTime] datetime2 NOT NULL,
    [State] int NOT NULL,
    CONSTRAINT [PK_CircuitBreakerStates] PRIMARY KEY ([Id])
);
2025-11-19 14:05:04.558 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RetryQueue] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [ScheduledRetryTime] datetime2 NOT NULL,
    [RetryCount] int NOT NULL,
    [Status] int NOT NULL,
    CONSTRAINT [PK_RetryQueue] PRIMARY KEY ([Id])
);
2025-11-19 14:05:04.560 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-11-19 14:05:04.563 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Transactions] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Gateway] nvarchar(max) NULL,
    [Status] int NOT NULL,
    [ErrorType] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Transactions_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-19 14:05:04.567 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TransactionAttempts] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [TransactionId] int NOT NULL,
    [AttemptNumber] int NOT NULL,
    [Status] int NOT NULL,
    [NotificationStatus] int NOT NULL,
    [ErrorType] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [AttemptedAt] datetime2 NOT NULL,
    [ResponseTime] time NULL,
    [GatewayResponse] nvarchar(max) NULL,
    CONSTRAINT [PK_TransactionAttempts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TransactionAttempts_Transactions_TransactionId] FOREIGN KEY ([TransactionId]) REFERENCES [Transactions] ([Id]) ON DELETE CASCADE
);
2025-11-19 14:05:04.569 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_TransactionId] ON [TransactionAttempts] ([TransactionId]);
2025-11-19 14:05:04.571 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_UserId] ON [Transactions] ([UserId]);
2025-11-19 14:05:04.573 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119120459_InitialMigration', N'8.0.0');
2025-11-19 14:05:22.644 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:05:23.361 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:05:23.707 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Users] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2)) AS i ([Email], [FullName], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Email], [FullName])
VALUES (i.[Email], i.[FullName])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 14:05:23.764 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:05:23.909 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2)) AS i ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorType], [Gateway], [Status], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorType], [Gateway], [Status], [UserId])
VALUES (i.[Amount], i.[CreatedAt], i.[Currency], i.[Description], i.[ErrorMessage], i.[ErrorType], i.[Gateway], i.[Status], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 14:05:23.931 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:05:24.005 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (DbType = Time), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (DbType = Int32), @p14='?' (Size = 4000), @p15='?' (DbType = Int32), @p16='?' (DbType = Time), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = Int32), @p26='?' (DbType = Time), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [TransactionAttempts] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, 0),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, 1),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 2)) AS i ([AttemptNumber], [AttemptedAt], [ErrorMessage], [ErrorType], [GatewayResponse], [NotificationStatus], [ResponseTime], [Status], [TransactionId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AttemptNumber], [AttemptedAt], [ErrorMessage], [ErrorType], [GatewayResponse], [NotificationStatus], [ResponseTime], [Status], [TransactionId], [UserId])
VALUES (i.[AttemptNumber], i.[AttemptedAt], i.[ErrorMessage], i.[ErrorType], i.[GatewayResponse], i.[NotificationStatus], i.[ResponseTime], i.[Status], i.[TransactionId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 14:05:24.312 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 14:05:24.758 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 14:05:24.760 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 14:05:24.806 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 14:05:24.822 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 14:05:24.823 +02:00 [INF] Hosting environment: Development
2025-11-19 14:05:24.824 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 14:05:25.626 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 14:05:26.682 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 1069.6334ms
2025-11-19 14:05:26.694 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 14:05:26.708 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 14:05:26.717 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 23.9272ms
2025-11-19 14:05:26.785 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 77.5233ms
2025-11-19 14:05:26.848 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 14:05:26.876 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 27.3785ms
2025-11-19 14:18:04.445 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:18:04.547 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:18:11.060 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:18:11.283 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 14:18:11.299 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 14:18:11.300 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 14:18:11.457 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-19 14:18:11.458 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 14:18:11.459 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 14:18:11.462 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-19 14:18:11.470 +02:00 [INF] Applying migration '20251119121804_InitialMigration'.
2025-11-19 14:18:11.518 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CircuitBreakerStates] (
    [Id] int NOT NULL IDENTITY,
    [Gateway] nvarchar(max) NULL,
    [FailureCount] int NOT NULL,
    [LastFailureTime] datetime2 NOT NULL,
    [State] int NOT NULL,
    CONSTRAINT [PK_CircuitBreakerStates] PRIMARY KEY ([Id])
);
2025-11-19 14:18:11.522 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ErrorType] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_ErrorType] PRIMARY KEY ([Id])
);
2025-11-19 14:18:11.525 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RetryQueue] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [ScheduledRetryTime] datetime2 NOT NULL,
    [RetryCount] int NOT NULL,
    [Status] int NOT NULL,
    CONSTRAINT [PK_RetryQueue] PRIMARY KEY ([Id])
);
2025-11-19 14:18:11.527 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Status] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Status] PRIMARY KEY ([Id])
);
2025-11-19 14:18:11.530 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-11-19 14:18:11.534 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Transactions] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Gateway] nvarchar(max) NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Transactions_ErrorType_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorType] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Status_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Status] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-19 14:18:11.551 +02:00 [ERR] Failed executing DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TransactionAttempts] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [AttemptNumber] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [AttemptedAt] datetime2 NOT NULL,
    [ResponseTime] time NULL,
    [GatewayResponse] nvarchar(max) NULL,
    CONSTRAINT [PK_TransactionAttempts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TransactionAttempts_ErrorType_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorType] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Status_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Status] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Transactions_TransactionId] FOREIGN KEY ([TransactionId]) REFERENCES [Transactions] ([Id]) ON DELETE CASCADE
);
2025-11-19 14:18:56.610 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:18:56.701 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:19:02.046 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:19:02.251 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 14:19:02.270 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 14:19:02.272 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 14:19:02.273 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 14:19:02.290 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-19 14:19:02.298 +02:00 [INF] Applying migration '20251119121856_InitialMigration'.
2025-11-19 14:19:02.338 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CircuitBreakerStates] (
    [Id] int NOT NULL IDENTITY,
    [Gateway] nvarchar(max) NULL,
    [FailureCount] int NOT NULL,
    [LastFailureTime] datetime2 NOT NULL,
    [State] int NOT NULL,
    CONSTRAINT [PK_CircuitBreakerStates] PRIMARY KEY ([Id])
);
2025-11-19 14:19:02.340 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ErrorTypes] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_ErrorTypes] PRIMARY KEY ([Id])
);
2025-11-19 14:19:02.342 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RetryQueue] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [ScheduledRetryTime] datetime2 NOT NULL,
    [RetryCount] int NOT NULL,
    [Status] int NOT NULL,
    CONSTRAINT [PK_RetryQueue] PRIMARY KEY ([Id])
);
2025-11-19 14:19:02.343 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Statuses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Statuses] PRIMARY KEY ([Id])
);
2025-11-19 14:19:02.345 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-11-19 14:19:02.348 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Transactions] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Gateway] nvarchar(max) NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Transactions_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-19 14:19:02.357 +02:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TransactionAttempts] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [AttemptNumber] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [AttemptedAt] datetime2 NOT NULL,
    [ResponseTime] time NULL,
    [GatewayResponse] nvarchar(max) NULL,
    CONSTRAINT [PK_TransactionAttempts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TransactionAttempts_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Transactions_TransactionId] FOREIGN KEY ([TransactionId]) REFERENCES [Transactions] ([Id]) ON DELETE CASCADE
);
2025-11-19 14:22:52.525 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:22:52.622 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:22:57.427 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:22:57.621 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 14:22:57.644 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 14:22:57.645 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 14:22:57.646 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 14:22:57.660 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-19 14:22:57.668 +02:00 [INF] Applying migration '20251119122252_InitialMigration'.
2025-11-19 14:22:57.713 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CircuitBreakerStates] (
    [Id] int NOT NULL IDENTITY,
    [Gateway] nvarchar(max) NULL,
    [FailureCount] int NOT NULL,
    [LastFailureTime] datetime2 NOT NULL,
    [State] int NOT NULL,
    CONSTRAINT [PK_CircuitBreakerStates] PRIMARY KEY ([Id])
);
2025-11-19 14:22:57.717 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ErrorTypes] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_ErrorTypes] PRIMARY KEY ([Id])
);
2025-11-19 14:22:57.721 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RetryQueue] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [ScheduledRetryTime] datetime2 NOT NULL,
    [RetryCount] int NOT NULL,
    [Status] int NOT NULL,
    CONSTRAINT [PK_RetryQueue] PRIMARY KEY ([Id])
);
2025-11-19 14:22:57.723 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Statuses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Statuses] PRIMARY KEY ([Id])
);
2025-11-19 14:22:57.727 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-11-19 14:22:57.732 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Transactions] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Gateway] nvarchar(max) NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Transactions_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-19 14:22:57.739 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TransactionAttempts] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [AttemptNumber] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [AttemptedAt] datetime2 NOT NULL,
    [ResponseTime] time NULL,
    [GatewayResponse] nvarchar(max) NULL,
    CONSTRAINT [PK_TransactionAttempts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TransactionAttempts_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Transactions_TransactionId] FOREIGN KEY ([TransactionId]) REFERENCES [Transactions] ([Id]) ON DELETE NO ACTION
);
2025-11-19 14:22:57.741 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_ErrorTypeId] ON [TransactionAttempts] ([ErrorTypeId]);
2025-11-19 14:22:57.743 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_StatusId] ON [TransactionAttempts] ([StatusId]);
2025-11-19 14:22:57.745 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_TransactionId] ON [TransactionAttempts] ([TransactionId]);
2025-11-19 14:22:57.980 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_ErrorTypeId] ON [Transactions] ([ErrorTypeId]);
2025-11-19 14:22:57.982 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_StatusId] ON [Transactions] ([StatusId]);
2025-11-19 14:22:57.988 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_UserId] ON [Transactions] ([UserId]);
2025-11-19 14:22:57.991 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119122252_InitialMigration', N'8.0.0');
2025-11-19 14:27:31.934 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:27:32.026 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:27:36.923 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:27:37.131 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 14:27:37.146 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 14:27:37.148 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 14:27:37.194 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-19 14:27:37.195 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 14:27:37.196 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 14:27:37.205 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-19 14:27:37.212 +02:00 [INF] Applying migration '20251119122732_InitialMigration'.
2025-11-19 14:27:37.242 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ErrorTypes] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_ErrorTypes] PRIMARY KEY ([Id])
);
2025-11-19 14:27:37.244 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Statuses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Statuses] PRIMARY KEY ([Id])
);
2025-11-19 14:27:37.247 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-11-19 14:27:37.251 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CircuitBreakerStates] (
    [Id] int NOT NULL IDENTITY,
    [Gateway] nvarchar(max) NULL,
    [StatusId] int NOT NULL,
    [FailureCount] int NOT NULL,
    [LastFailureTime] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_CircuitBreakerStates] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CircuitBreakerStates_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE
);
2025-11-19 14:27:37.253 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RetryQueue] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ScheduledRetryTime] datetime2 NOT NULL,
    [RetryCount] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_RetryQueue] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RetryQueue_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE
);
2025-11-19 14:27:37.258 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Transactions] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Gateway] nvarchar(max) NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Transactions_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-19 14:27:37.262 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TransactionAttempts] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [AttemptNumber] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [AttemptedAt] datetime2 NOT NULL,
    [ResponseTime] time NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_TransactionAttempts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TransactionAttempts_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Transactions_TransactionId] FOREIGN KEY ([TransactionId]) REFERENCES [Transactions] ([Id]) ON DELETE NO ACTION
);
2025-11-19 14:27:37.308 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CircuitBreakerStates_StatusId] ON [CircuitBreakerStates] ([StatusId]);
2025-11-19 14:27:37.309 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RetryQueue_StatusId] ON [RetryQueue] ([StatusId]);
2025-11-19 14:27:37.311 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_ErrorTypeId] ON [TransactionAttempts] ([ErrorTypeId]);
2025-11-19 14:27:37.312 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_StatusId] ON [TransactionAttempts] ([StatusId]);
2025-11-19 14:27:37.313 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_TransactionId] ON [TransactionAttempts] ([TransactionId]);
2025-11-19 14:27:37.315 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_ErrorTypeId] ON [Transactions] ([ErrorTypeId]);
2025-11-19 14:27:37.316 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_StatusId] ON [Transactions] ([StatusId]);
2025-11-19 14:27:37.317 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_UserId] ON [Transactions] ([UserId]);
2025-11-19 14:27:37.321 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119122732_InitialMigration', N'8.0.0');
2025-11-19 14:28:15.861 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:28:17.384 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:28:18.062 +02:00 [INF] Executed DbCommand (111ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Statuses] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4),
(@p10, @p11, 5)) AS i ([CreatedAt], [Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Name])
VALUES (i.[CreatedAt], i.[Name])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 14:28:18.152 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:28:23.211 +02:00 [INF] Executed DbCommand (5,005ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [ErrorTypes] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4),
(@p10, @p11, 5),
(@p12, @p13, 6),
(@p14, @p15, 7),
(@p16, @p17, 8),
(@p18, @p19, 9)) AS i ([CreatedAt], [Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Name])
VALUES (i.[CreatedAt], i.[Name])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 14:28:23.249 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:28:23.315 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Users] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2)) AS i ([CreatedAt], [Email], [FullName], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Email], [FullName])
VALUES (i.[CreatedAt], i.[Email], i.[FullName])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 14:28:23.344 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:30:34.924 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:30:36.273 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:30:36.409 +02:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:30:36.430 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:30:36.451 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:30:54.533 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:30:55.890 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:30:55.955 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:30:55.974 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:30:55.993 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:33:33.154 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 14:33:34.516 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:33:34.593 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:33:34.619 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:33:34.655 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:33:35.421 +02:00 [INF] Executed DbCommand (128ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2)) AS i ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorTypeId], [Gateway], [StatusId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorTypeId], [Gateway], [StatusId], [UserId])
VALUES (i.[Amount], i.[CreatedAt], i.[Currency], i.[Description], i.[ErrorMessage], i.[ErrorTypeId], i.[Gateway], i.[StatusId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 14:33:35.557 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 14:33:35.727 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Time), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Time), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (DbType = DateTime2), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Time), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [TransactionAttempts] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, 0),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, 1),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 2)) AS i ([AttemptNumber], [AttemptedAt], [CreatedAt], [ErrorMessage], [ErrorTypeId], [GatewayResponse], [ResponseTime], [StatusId], [TransactionId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AttemptNumber], [AttemptedAt], [CreatedAt], [ErrorMessage], [ErrorTypeId], [GatewayResponse], [ResponseTime], [StatusId], [TransactionId], [UserId])
VALUES (i.[AttemptNumber], i.[AttemptedAt], i.[CreatedAt], i.[ErrorMessage], i.[ErrorTypeId], i.[GatewayResponse], i.[ResponseTime], i.[StatusId], i.[TransactionId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 14:33:36.360 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 14:33:37.205 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 14:33:37.210 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 14:33:37.344 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 14:33:37.380 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 14:33:37.381 +02:00 [INF] Hosting environment: Development
2025-11-19 14:33:37.385 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 14:33:38.278 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 14:33:38.714 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 463.3774ms
2025-11-19 14:33:38.788 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 14:33:38.788 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 14:33:38.812 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 24.5705ms
2025-11-19 14:33:38.892 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 105.3267ms
2025-11-19 14:33:38.936 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 14:33:38.967 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.4396ms
2025-11-19 15:43:59.839 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 15:44:00.306 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 15:44:00.326 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 15:44:00.328 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 15:44:00.393 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-19 15:44:00.395 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 15:44:00.397 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 15:44:00.402 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-19 15:44:00.412 +02:00 [INF] Applying migration '20251119122732_InitialMigration'.
2025-11-19 15:44:00.462 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ErrorTypes] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_ErrorTypes] PRIMARY KEY ([Id])
);
2025-11-19 15:44:00.466 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Statuses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Statuses] PRIMARY KEY ([Id])
);
2025-11-19 15:44:00.468 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-11-19 15:44:00.470 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CircuitBreakerStates] (
    [Id] int NOT NULL IDENTITY,
    [Gateway] nvarchar(max) NULL,
    [StatusId] int NOT NULL,
    [FailureCount] int NOT NULL,
    [LastFailureTime] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_CircuitBreakerStates] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CircuitBreakerStates_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE
);
2025-11-19 15:44:00.473 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RetryQueue] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ScheduledRetryTime] datetime2 NOT NULL,
    [RetryCount] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_RetryQueue] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RetryQueue_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE
);
2025-11-19 15:44:00.487 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Transactions] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Gateway] nvarchar(max) NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Transactions_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-19 15:44:00.493 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TransactionAttempts] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [AttemptNumber] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [AttemptedAt] datetime2 NOT NULL,
    [ResponseTime] time NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_TransactionAttempts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TransactionAttempts_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Transactions_TransactionId] FOREIGN KEY ([TransactionId]) REFERENCES [Transactions] ([Id]) ON DELETE NO ACTION
);
2025-11-19 15:44:00.515 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CircuitBreakerStates_StatusId] ON [CircuitBreakerStates] ([StatusId]);
2025-11-19 15:44:00.517 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RetryQueue_StatusId] ON [RetryQueue] ([StatusId]);
2025-11-19 15:44:00.519 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_ErrorTypeId] ON [TransactionAttempts] ([ErrorTypeId]);
2025-11-19 15:44:00.520 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_StatusId] ON [TransactionAttempts] ([StatusId]);
2025-11-19 15:44:00.522 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_TransactionId] ON [TransactionAttempts] ([TransactionId]);
2025-11-19 15:44:00.523 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_ErrorTypeId] ON [Transactions] ([ErrorTypeId]);
2025-11-19 15:44:00.525 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_StatusId] ON [Transactions] ([StatusId]);
2025-11-19 15:44:00.526 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_UserId] ON [Transactions] ([UserId]);
2025-11-19 15:44:00.528 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119122732_InitialMigration', N'8.0.0');
2025-11-19 15:44:26.290 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 15:44:27.809 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 15:45:11.674 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 15:45:13.251 +02:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 15:45:13.990 +02:00 [INF] Executed DbCommand (116ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Statuses] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4),
(@p10, @p11, 5)) AS i ([CreatedAt], [Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Name])
VALUES (i.[CreatedAt], i.[Name])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 15:45:14.089 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 15:45:14.173 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [ErrorTypes] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4),
(@p10, @p11, 5),
(@p12, @p13, 6),
(@p14, @p15, 7),
(@p16, @p17, 8),
(@p18, @p19, 9)) AS i ([CreatedAt], [Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Name])
VALUES (i.[CreatedAt], i.[Name])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 15:45:14.205 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 15:45:14.267 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Users] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2)) AS i ([CreatedAt], [Email], [FullName], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Email], [FullName])
VALUES (i.[CreatedAt], i.[Email], i.[FullName])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 15:45:14.293 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 15:45:14.482 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2)) AS i ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorTypeId], [Gateway], [StatusId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorTypeId], [Gateway], [StatusId], [UserId])
VALUES (i.[Amount], i.[CreatedAt], i.[Currency], i.[Description], i.[ErrorMessage], i.[ErrorTypeId], i.[Gateway], i.[StatusId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 15:45:14.514 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 15:45:14.657 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Time), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Time), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (DbType = DateTime2), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Time), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [TransactionAttempts] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, 0),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, 1),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 2)) AS i ([AttemptNumber], [AttemptedAt], [CreatedAt], [ErrorMessage], [ErrorTypeId], [GatewayResponse], [ResponseTime], [StatusId], [TransactionId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AttemptNumber], [AttemptedAt], [CreatedAt], [ErrorMessage], [ErrorTypeId], [GatewayResponse], [ResponseTime], [StatusId], [TransactionId], [UserId])
VALUES (i.[AttemptNumber], i.[AttemptedAt], i.[CreatedAt], i.[ErrorMessage], i.[ErrorTypeId], i.[GatewayResponse], i.[ResponseTime], i.[StatusId], i.[TransactionId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 15:45:15.418 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 15:45:16.300 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 15:45:16.305 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 15:45:16.380 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 15:45:16.441 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 15:45:16.444 +02:00 [INF] Hosting environment: Development
2025-11-19 15:45:16.447 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 15:45:17.515 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 15:45:18.137 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 645.1015ms
2025-11-19 15:45:18.288 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 15:45:18.288 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 15:45:18.323 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 34.789ms
2025-11-19 15:45:18.445 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 157.168ms
2025-11-19 15:45:18.488 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 15:45:18.532 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 44.0773ms
2025-11-19 15:46:45.842 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 15:46:47.302 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 15:46:47.396 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 15:46:47.420 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 15:46:47.448 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 15:46:47.485 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 15:46:48.106 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 15:46:48.973 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 15:46:48.979 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 15:46:49.076 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 15:46:49.232 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 15:46:49.237 +02:00 [INF] Hosting environment: Development
2025-11-19 15:46:49.243 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 15:46:49.690 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 15:46:50.163 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 506.4168ms
2025-11-19 15:46:50.225 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 15:46:50.225 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 15:46:50.275 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 48.6704ms
2025-11-19 15:46:50.337 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 111.3812ms
2025-11-19 15:46:50.386 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 15:46:50.423 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 37.1042ms
2025-11-19 15:47:02.707 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/rabbitmq://localhost - null null
2025-11-19 15:47:02.748 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/rabbitmq://localhost - 404 null null 40.8694ms
2025-11-19 15:47:02.773 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7106/rabbitmq://localhost, Response status code: 404
2025-11-19 15:47:14.449 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/rabbitmq - null null
2025-11-19 15:47:14.471 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/rabbitmq - 404 null null 25.556ms
2025-11-19 15:47:14.491 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7106/rabbitmq, Response status code: 404
2025-11-19 16:31:26.555 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 16:31:28.159 +02:00 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:31:28.237 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:31:28.264 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:31:28.301 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:31:28.329 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:31:28.979 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 16:31:29.883 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 16:31:29.887 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 16:31:30.011 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 16:31:30.145 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 16:31:30.150 +02:00 [INF] Hosting environment: Development
2025-11-19 16:31:30.158 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 16:31:30.949 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 16:31:31.439 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 519.1686ms
2025-11-19 16:31:31.474 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 16:31:31.474 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 16:31:31.520 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 46.2697ms
2025-11-19 16:31:31.608 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 134.4739ms
2025-11-19 16:31:31.662 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 16:31:31.695 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 33.7335ms
2025-11-19 16:40:27.148 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 16:40:28.558 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:40:28.642 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:40:28.671 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:40:28.702 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:40:28.738 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:40:29.371 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 16:40:30.173 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 16:40:30.179 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 16:40:30.288 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 16:40:30.423 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 16:40:30.462 +02:00 [INF] Hosting environment: Development
2025-11-19 16:40:30.478 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 16:40:30.904 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 16:40:31.359 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 484.0388ms
2025-11-19 16:40:31.427 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 16:40:31.427 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 16:40:31.447 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 20.6271ms
2025-11-19 16:40:31.533 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 106.0302ms
2025-11-19 16:40:31.580 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 16:40:31.608 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.5885ms
2025-11-19 16:43:44.929 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/transactions/Retry?id=1 - null 0
2025-11-19 16:43:44.969 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-19 16:43:45.047 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-19 16:43:53.775 +02:00 [INF] Executed DbCommand (154ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 16:47:40.568 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 16:47:41.947 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:47:42.028 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:47:42.062 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:47:42.092 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:47:42.125 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:47:42.647 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 16:47:43.498 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 16:47:43.513 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 16:47:43.601 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 16:47:43.913 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 16:47:43.916 +02:00 [INF] Hosting environment: Development
2025-11-19 16:47:43.918 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 16:47:44.163 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 16:47:44.635 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 496.971ms
2025-11-19 16:47:44.696 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 16:47:44.696 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 16:47:44.723 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 27.1358ms
2025-11-19 16:47:44.807 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 111.1394ms
2025-11-19 16:47:44.851 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 16:47:44.882 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.6457ms
2025-11-19 16:47:50.940 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/transactions/Retry?id=1 - null 0
2025-11-19 16:47:50.974 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-19 16:47:51.033 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-19 16:47:54.730 +02:00 [INF] Executed DbCommand (128ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 16:50:41.384 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-19 16:50:41.401 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 170347.2207ms
2025-11-19 16:50:41.417 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-19 16:50:41.439 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/transactions/Retry?id=1 - 200 null text/plain; charset=utf-8 170499.3202ms
2025-11-19 16:57:36.788 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 16:57:38.183 +02:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:57:38.274 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:57:38.305 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:57:38.343 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:57:38.377 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:57:38.996 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 16:57:39.782 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 16:57:39.787 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 16:57:39.880 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 16:57:40.002 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 16:57:40.006 +02:00 [INF] Hosting environment: Development
2025-11-19 16:57:40.009 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 16:58:54.971 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 16:58:56.577 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:58:56.696 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:58:56.720 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:58:56.749 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:58:56.780 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 16:58:57.374 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 16:58:58.242 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 16:58:58.247 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 16:58:58.401 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 16:58:58.519 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 16:58:58.520 +02:00 [INF] Hosting environment: Development
2025-11-19 16:58:58.523 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 16:58:58.953 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 17:00:58.738 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 17:01:00.106 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:01:00.203 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:01:00.231 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:01:00.257 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:01:00.280 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:01:00.822 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 17:01:01.545 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 17:01:01.550 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 17:01:01.660 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 17:01:01.766 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 17:01:01.769 +02:00 [INF] Hosting environment: Development
2025-11-19 17:01:01.772 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 17:01:02.467 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 17:01:54.632 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 52178.4587ms
2025-11-19 17:01:54.710 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 17:01:54.710 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 17:01:54.736 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 28.2997ms
2025-11-19 17:01:54.844 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 135.5729ms
2025-11-19 17:01:54.983 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 17:01:55.095 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 112.0576ms
2025-11-19 17:01:55.112 +02:00 [INF] Executed DbCommand (142ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 17:01:55.112 +02:00 [INF] Executed DbCommand (216ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 17:05:03.498 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/transactions/Retry?id=1 - null 0
2025-11-19 17:05:03.541 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-19 17:05:03.605 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-19 17:05:07.323 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 17:05:18.246 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 17:05:18.247 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-19 17:05:26.387 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 21269.4567ms
2025-11-19 17:08:56.639 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 17:08:58.064 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:08:58.148 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:08:58.173 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:08:58.202 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:08:58.235 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:08:58.765 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 17:08:59.541 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 17:08:59.543 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 17:08:59.649 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 17:08:59.781 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 17:08:59.784 +02:00 [INF] Hosting environment: Development
2025-11-19 17:08:59.787 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 17:09:19.481 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 17:09:19.907 +02:00 [INF] Executed DbCommand (120ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 17:09:20.024 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 561.406ms
2025-11-19 17:09:21.811 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 17:09:23.106 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 17:09:31.786 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 9978.3433ms
2025-11-19 17:09:31.870 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 8763.7843ms
2025-11-19 17:09:31.985 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 17:09:32.015 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-19 17:11:38.346 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 17:11:38.670 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 17:11:38.685 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 17:11:38.690 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 17:11:38.792 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-19 17:11:38.794 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-19 17:11:38.796 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-19 17:11:38.801 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-19 17:11:38.812 +02:00 [INF] Applying migration '20251119122732_InitialMigration'.
2025-11-19 17:11:38.866 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ErrorTypes] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_ErrorTypes] PRIMARY KEY ([Id])
);
2025-11-19 17:11:38.871 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Statuses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Statuses] PRIMARY KEY ([Id])
);
2025-11-19 17:11:38.874 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-11-19 17:11:38.879 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CircuitBreakerStates] (
    [Id] int NOT NULL IDENTITY,
    [Gateway] nvarchar(max) NULL,
    [StatusId] int NOT NULL,
    [FailureCount] int NOT NULL,
    [LastFailureTime] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_CircuitBreakerStates] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_CircuitBreakerStates_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE
);
2025-11-19 17:11:38.883 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RetryQueue] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ScheduledRetryTime] datetime2 NOT NULL,
    [RetryCount] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_RetryQueue] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RetryQueue_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE
);
2025-11-19 17:11:38.890 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Transactions] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Gateway] nvarchar(max) NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Transactions_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-19 17:11:38.898 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TransactionAttempts] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [AttemptNumber] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [AttemptedAt] datetime2 NOT NULL,
    [ResponseTime] time NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_TransactionAttempts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TransactionAttempts_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Transactions_TransactionId] FOREIGN KEY ([TransactionId]) REFERENCES [Transactions] ([Id]) ON DELETE NO ACTION
);
2025-11-19 17:11:38.906 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_CircuitBreakerStates_StatusId] ON [CircuitBreakerStates] ([StatusId]);
2025-11-19 17:11:38.909 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RetryQueue_StatusId] ON [RetryQueue] ([StatusId]);
2025-11-19 17:11:39.526 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_ErrorTypeId] ON [TransactionAttempts] ([ErrorTypeId]);
2025-11-19 17:11:39.529 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_StatusId] ON [TransactionAttempts] ([StatusId]);
2025-11-19 17:11:39.531 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_TransactionId] ON [TransactionAttempts] ([TransactionId]);
2025-11-19 17:11:39.535 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_ErrorTypeId] ON [Transactions] ([ErrorTypeId]);
2025-11-19 17:11:39.538 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_StatusId] ON [Transactions] ([StatusId]);
2025-11-19 17:11:39.540 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_UserId] ON [Transactions] ([UserId]);
2025-11-19 17:11:39.545 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119122732_InitialMigration', N'8.0.0');
2025-11-19 17:11:58.462 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 17:11:59.835 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:12:00.594 +02:00 [INF] Executed DbCommand (137ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Statuses] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4),
(@p10, @p11, 5)) AS i ([CreatedAt], [Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Name])
VALUES (i.[CreatedAt], i.[Name])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 17:12:00.685 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:12:00.762 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [ErrorTypes] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4),
(@p10, @p11, 5),
(@p12, @p13, 6),
(@p14, @p15, 7),
(@p16, @p17, 8),
(@p18, @p19, 9)) AS i ([CreatedAt], [Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Name])
VALUES (i.[CreatedAt], i.[Name])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 17:12:00.794 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:12:00.861 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Users] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2)) AS i ([CreatedAt], [Email], [FullName], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Email], [FullName])
VALUES (i.[CreatedAt], i.[Email], i.[FullName])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 17:12:00.894 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:12:01.099 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2)) AS i ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorTypeId], [Gateway], [StatusId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorTypeId], [Gateway], [StatusId], [UserId])
VALUES (i.[Amount], i.[CreatedAt], i.[Currency], i.[Description], i.[ErrorMessage], i.[ErrorTypeId], i.[Gateway], i.[StatusId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 17:12:01.138 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:12:01.280 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Time), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Time), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (DbType = DateTime2), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Time), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [TransactionAttempts] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, 0),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, 1),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 2)) AS i ([AttemptNumber], [AttemptedAt], [CreatedAt], [ErrorMessage], [ErrorTypeId], [GatewayResponse], [ResponseTime], [StatusId], [TransactionId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AttemptNumber], [AttemptedAt], [CreatedAt], [ErrorMessage], [ErrorTypeId], [GatewayResponse], [ResponseTime], [StatusId], [TransactionId], [UserId])
VALUES (i.[AttemptNumber], i.[AttemptedAt], i.[CreatedAt], i.[ErrorMessage], i.[ErrorTypeId], i.[GatewayResponse], i.[ResponseTime], i.[StatusId], i.[TransactionId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-19 17:12:01.916 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 17:12:02.799 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 17:12:02.803 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 17:12:02.941 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 17:12:02.971 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 17:12:02.975 +02:00 [INF] Hosting environment: Development
2025-11-19 17:12:02.980 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 17:12:17.101 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 17:12:17.347 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 17:12:42.436 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 25363.3751ms
2025-11-19 17:12:42.481 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-19 17:12:42.484 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 17:12:42.484 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 17:12:54.115 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 11633.1345ms
2025-11-19 17:12:54.194 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-19 17:17:09.439 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 17:17:10.852 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:17:10.941 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:17:10.967 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:17:10.996 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:17:11.020 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:17:11.621 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 17:17:12.394 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 17:17:12.401 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 17:17:12.495 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 17:17:13.058 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 17:17:13.061 +02:00 [INF] Hosting environment: Development
2025-11-19 17:17:13.066 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 17:17:20.872 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 17:17:21.264 +02:00 [INF] Executed DbCommand (125ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 17:17:21.376 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 520.3367ms
2025-11-19 17:17:23.620 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 17:17:23.620 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 17:17:33.755 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 10145.7523ms
2025-11-19 17:17:33.832 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10222.6532ms
2025-11-19 17:17:33.945 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 17:17:33.985 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 40.5363ms
2025-11-19 17:18:33.949 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/transactions/Retry?id=1 - null 0
2025-11-19 17:18:33.985 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-19 17:18:34.043 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-19 17:18:37.048 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 17:18:45.335 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-19 17:18:45.378 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 17:18:45.759 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 11365.8843ms
2025-11-19 17:18:47.645 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-19 17:18:47.725 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/transactions/Retry?id=1 - 200 null text/plain; charset=utf-8 13777.2636ms
2025-11-19 17:18:47.943 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-19 17:19:54.754 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 17:19:56.118 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:19:56.206 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:19:56.238 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:19:56.276 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:19:56.317 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:19:56.881 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 17:19:57.664 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 17:19:57.671 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 17:19:57.768 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 17:19:58.132 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 17:19:58.136 +02:00 [INF] Hosting environment: Development
2025-11-19 17:19:58.148 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 17:20:07.414 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 17:20:07.749 +02:00 [INF] Executed DbCommand (115ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 17:20:07.891 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 491.4938ms
2025-11-19 17:20:10.574 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 17:20:10.574 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 17:20:11.216 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 642.5545ms
2025-11-19 17:20:11.304 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 729.3987ms
2025-11-19 17:20:11.424 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-19 17:20:11.466 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 17:20:14.701 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 3235.5974ms
2025-11-19 17:20:14.924 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-19 17:37:08.416 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 17:37:09.993 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:37:10.076 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:37:10.112 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:37:10.140 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:37:10.159 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:37:10.838 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 17:37:11.782 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 17:37:11.793 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 17:37:11.878 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 17:37:12.058 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 17:37:12.065 +02:00 [INF] Hosting environment: Development
2025-11-19 17:37:12.070 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 17:37:14.853 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 17:37:15.219 +02:00 [INF] Executed DbCommand (91ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 17:37:15.345 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 529.4566ms
2025-11-19 17:37:15.477 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 17:37:15.477 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 17:37:15.511 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 36.4171ms
2025-11-19 17:37:15.629 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 152.7083ms
2025-11-19 17:37:15.686 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-19 17:37:15.739 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 17:37:15.775 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 38.2121ms
2025-11-19 17:37:15.952 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-19 17:40:09.049 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 17:40:10.459 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:40:10.546 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:40:10.576 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:40:10.606 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:40:10.630 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 17:40:11.211 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 17:40:12.078 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 17:40:12.086 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 17:40:12.195 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 17:40:12.728 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 17:40:12.731 +02:00 [INF] Hosting environment: Development
2025-11-19 17:40:12.843 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 17:40:12.994 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 17:40:15.980 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 3014.375ms
2025-11-19 17:40:16.086 +02:00 [INF] Executed DbCommand (99ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 17:40:16.121 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 17:40:16.121 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 17:40:16.163 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 44.2352ms
2025-11-19 17:40:16.230 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 111.7101ms
2025-11-19 17:40:16.359 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 17:40:16.391 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.9398ms
2025-11-19 17:40:16.447 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-19 17:40:16.693 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-19 17:44:21.536 +02:00 [ERR] An error occurred using the connection to database 'TransactionRetrySystem' on server 'DESKTOP-8DBDUBG'.
2025-11-19 17:44:21.634 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'TransactionRetrySystem.Infrastructure.Context.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=0; handshake=6; [Login] initialization=0; authentication=0; [Post-Login] complete=14020; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:53b3a2e8-74a4-40d9-a221-27ec0496a2e6
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=0; handshake=6; [Login] initialization=0; authentication=0; [Post-Login] complete=14020; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:53b3a2e8-74a4-40d9-a221-27ec0496a2e6
Error Number:-2,State:0,Class:11
2025-11-19 17:44:22.050 +02:00 [ERR] R-FAULT "rabbitmq://localhost/transaction-retry-queue" "e41a0000-7eaf-eee5-40ac-08de27826b46" TransactionRetrySystem.Application.Dtos.Requests.RetryTransactionRequest TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer("00:00:38.4053960")
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=0; handshake=6; [Login] initialization=0; authentication=0; [Post-Login] complete=14020; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at TransactionRetrySystem.Application.Services.TransactionRetryService.ProcessRetry(Int32 transactionId, Int32 attemptNumber, CancellationToken cancellationToken) in C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.Application\Services\TransactionRetryService.cs:line 43
   at TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer.Consume(ConsumeContext`1 context) in C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.Application\Services\MassTransit\RetryTransactionConsumer.cs:line 19
   at MassTransit.DependencyInjection.ScopeConsumerFactory`1.Send[TMessage](ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/DependencyInjection/DependencyInjection/ScopeConsumerFactory.cs:line 22
   at MassTransit.DependencyInjection.ScopeConsumerFactory`1.Send[TMessage](ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/DependencyInjection/DependencyInjection/ScopeConsumerFactory.cs:line 22
   at MassTransit.Middleware.ConsumerMessageFilter`2.MassTransit.IFilter<MassTransit.ConsumeContext<TMessage>>.Send(ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/Middleware/ConsumerMessageFilter.cs:line 48
ClientConnectionId:53b3a2e8-74a4-40d9-a221-27ec0496a2e6
Error Number:-2,State:0,Class:11
2025-11-19 17:44:42.447 +02:00 [ERR] Failed executing DbCommand (35,032ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-19 17:44:42.481 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'TransactionRetrySystem.Infrastructure.Context.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d5f5019d-ae54-41ef-ac0d-b382ba1bce17
Error Number:-2,State:0,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d5f5019d-ae54-41ef-ac0d-b382ba1bce17
Error Number:-2,State:0,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-19 17:44:56.745 +02:00 [ERR] An error occurred using the connection to database 'TransactionRetrySystem' on server 'DESKTOP-8DBDUBG'.
2025-11-19 17:44:56.758 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'TransactionRetrySystem.Infrastructure.Context.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=1; handshake=5; [Login] initialization=0; authentication=0; [Post-Login] complete=14005; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
ClientConnectionId:7501c8c8-6c7f-437c-a277-baf65488dd8f
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=1; handshake=5; [Login] initialization=0; authentication=0; [Post-Login] complete=14005; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
ClientConnectionId:7501c8c8-6c7f-437c-a277-baf65488dd8f
Error Number:-2,State:0,Class:11
2025-11-19 17:44:56.922 +02:00 [ERR] R-FAULT "rabbitmq://localhost/transaction-retry-queue" "18930000-7eaf-eee5-73d3-08de277eead8" TransactionRetrySystem.Application.Dtos.Requests.RetryTransactionRequest TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer("00:04:44.4923869")
Microsoft.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed during the post-login phase.  The connection could have timed out while waiting for server to complete the login process and respond; Or it could have timed out while attempting to create multiple active connections.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=1; handshake=5; [Login] initialization=0; authentication=0; [Post-Login] complete=14005; 
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ThrowExceptionAndWarning(Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)
   at Microsoft.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()
   at Microsoft.Data.SqlClient.TdsParserStateObject.TryReadByte(Byte& value)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TransactionRetrySystem.Application.Services.TransactionRetryService.ProcessRetry(Int32 transactionId, Int32 attemptNumber, CancellationToken cancellationToken) in C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.Application\Services\TransactionRetryService.cs:line 149
   at TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer.Consume(ConsumeContext`1 context) in C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.Application\Services\MassTransit\RetryTransactionConsumer.cs:line 19
   at MassTransit.DependencyInjection.ScopeConsumerFactory`1.Send[TMessage](ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/DependencyInjection/DependencyInjection/ScopeConsumerFactory.cs:line 22
   at MassTransit.DependencyInjection.ScopeConsumerFactory`1.Send[TMessage](ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/DependencyInjection/DependencyInjection/ScopeConsumerFactory.cs:line 22
   at MassTransit.Middleware.ConsumerMessageFilter`2.MassTransit.IFilter<MassTransit.ConsumeContext<TMessage>>.Send(ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/Middleware/ConsumerMessageFilter.cs:line 48
ClientConnectionId:7501c8c8-6c7f-437c-a277-baf65488dd8f
Error Number:-2,State:0,Class:11
2025-11-19 18:17:22.636 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 18:17:24.148 +02:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:17:24.222 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:17:24.243 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:17:24.272 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:17:24.303 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:17:24.913 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 18:17:25.793 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 18:17:25.797 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 18:17:25.889 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 18:17:26.023 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 18:17:26.027 +02:00 [INF] Hosting environment: Development
2025-11-19 18:17:26.034 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 18:17:26.945 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 18:17:27.347 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 18:17:27.352 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 423.4516ms
2025-11-19 18:17:27.361 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 18:17:27.371 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 23.5642ms
2025-11-19 18:17:28.101 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 741.3213ms
2025-11-19 18:17:28.149 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 18:17:28.189 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 41.2345ms
2025-11-19 18:17:38.477 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/api/transactions/RetryHistory?id=1 - null null
2025-11-19 18:17:38.519 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API)'
2025-11-19 18:17:38.594 +02:00 [INF] Route matched with {action = "GetRetryHistory", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[TransactionRetrySystem.Application.Dtos.Responses.RetryHistoryItemResponse]] GetRetryHistory(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-19 18:17:39.156 +02:00 [INF] Executed DbCommand (139ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptNumber]
2025-11-19 18:17:39.241 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TransactionRetrySystem.Application.Dtos.Responses.RetryHistoryItemResponse, TransactionRetrySystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-19 18:17:39.300 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API) in 684.801ms
2025-11-19 18:17:39.309 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API)'
2025-11-19 18:17:39.322 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/api/transactions/RetryHistory?id=1 - 200 null application/json; charset=utf-8 844.7519ms
2025-11-19 18:17:57.621 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/api/transactions/Status?id=1 - null null
2025-11-19 18:17:57.634 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API)'
2025-11-19 18:17:57.653 +02:00 [INF] Route matched with {action = "GetTransactionStatus", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[TransactionRetrySystem.Application.Dtos.Responses.TransactionStatusResponse] GetTransactionStatus(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-19 18:17:57.743 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 18:17:57.881 +02:00 [INF] Executing ObjectResult, writing value of type 'TransactionRetrySystem.Application.Dtos.Responses.TransactionStatusResponse'.
2025-11-19 18:17:57.896 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API) in 235.4754ms
2025-11-19 18:17:57.906 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API)'
2025-11-19 18:17:57.915 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/api/transactions/Status?id=1 - 200 null application/json; charset=utf-8 294.55ms
2025-11-19 18:22:03.231 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 18:22:04.725 +02:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:22:04.814 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:22:04.840 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:22:04.871 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:22:04.899 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:22:05.514 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 18:22:06.371 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 18:22:06.377 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 18:22:06.465 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 18:22:06.611 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 18:22:06.615 +02:00 [INF] Hosting environment: Development
2025-11-19 18:22:06.620 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 18:22:07.071 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 18:22:07.434 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 383.4907ms
2025-11-19 18:22:07.545 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 18:22:07.545 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 18:22:07.590 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 45.9266ms
2025-11-19 18:22:07.649 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 104.775ms
2025-11-19 18:22:07.689 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 18:22:07.736 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 46.6205ms
2025-11-19 18:22:16.567 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/api/transactions/Status?id=1 - null null
2025-11-19 18:22:16.596 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API)'
2025-11-19 18:22:16.650 +02:00 [INF] Route matched with {action = "GetTransactionStatus", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] GetTransactionStatus(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-19 18:22:17.126 +02:00 [INF] Executed DbCommand (106ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 18:22:52.222 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 18:22:53.691 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:22:53.811 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:22:53.837 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:22:53.873 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:22:53.908 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:22:54.486 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 18:22:55.316 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 18:22:55.320 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 18:22:55.409 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 18:22:55.527 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 18:22:55.530 +02:00 [INF] Hosting environment: Development
2025-11-19 18:22:55.532 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 18:22:56.284 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 18:22:56.661 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 394.3688ms
2025-11-19 18:22:56.733 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 18:22:56.733 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 18:22:56.752 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 19.7515ms
2025-11-19 18:22:56.834 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 100.2234ms
2025-11-19 18:22:56.880 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 18:22:56.914 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 33.9355ms
2025-11-19 18:23:08.604 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/api/transactions/Status?id=1 - null null
2025-11-19 18:23:08.634 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API)'
2025-11-19 18:23:08.699 +02:00 [INF] Route matched with {action = "GetTransactionStatus", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] GetTransactionStatus(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-19 18:23:09.325 +02:00 [INF] Executed DbCommand (123ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId], [s].[Id], [s].[CreatedAt], [s].[Name]
FROM [TransactionAttempts] AS [t]
INNER JOIN [Statuses] AS [s] ON [t].[StatusId] = [s].[Id]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-19 18:23:09.382 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-19 18:23:09.398 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API) in 683.2932ms
2025-11-19 18:23:09.407 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API)'
2025-11-19 18:23:09.427 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/api/transactions/Status?id=1 - 200 null text/plain; charset=utf-8 824.8804ms
2025-11-19 18:26:36.116 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-19 18:26:37.507 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:26:37.573 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:26:37.601 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:26:37.631 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:26:37.653 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-19 18:26:38.210 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-19 18:26:38.997 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-19 18:26:39.000 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-19 18:26:39.123 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-19 18:26:39.241 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-19 18:26:39.244 +02:00 [INF] Hosting environment: Development
2025-11-19 18:26:39.247 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-19 18:26:40.047 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-19 18:26:40.459 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 430.8158ms
2025-11-19 18:26:40.534 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-19 18:26:40.534 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-19 18:26:40.580 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 45.777ms
2025-11-19 18:26:40.648 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 114.6408ms
2025-11-19 18:26:40.689 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-19 18:26:40.730 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 41.6953ms
2025-11-19 18:26:54.048 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/api/transactions/RetryHistory?id=1 - null null
2025-11-19 18:26:54.098 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API)'
2025-11-19 18:26:54.170 +02:00 [INF] Route matched with {action = "GetRetryHistory", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[TransactionRetrySystem.Application.Dtos.Responses.RetryHistoryItemResponse]] GetRetryHistory(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-19 18:26:54.663 +02:00 [INF] Executed DbCommand (139ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptNumber]
2025-11-19 18:26:54.723 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TransactionRetrySystem.Application.Dtos.Responses.RetryHistoryItemResponse, TransactionRetrySystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-19 18:26:54.776 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API) in 588.4868ms
2025-11-19 18:26:54.786 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API)'
2025-11-19 18:26:54.799 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/api/transactions/RetryHistory?id=1 - 200 null application/json; charset=utf-8 752.7721ms
