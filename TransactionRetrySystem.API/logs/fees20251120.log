2025-11-20 08:20:54.529 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 08:20:55.252 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:20:55.299 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:20:55.313 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:20:55.329 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:20:55.345 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:20:55.600 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 08:26:26.458 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 08:26:27.132 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:26:27.164 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:26:27.175 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:26:27.185 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:26:27.194 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:26:27.484 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 08:26:27.892 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 08:26:27.902 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 08:26:27.995 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 08:26:28.028 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 08:26:28.030 +02:00 [INF] Hosting environment: Development
2025-11-20 08:26:28.034 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 08:26:28.963 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 08:26:29.298 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 355.3153ms
2025-11-20 08:26:29.357 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 08:26:29.357 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 08:26:29.375 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 18.8188ms
2025-11-20 08:26:29.435 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.044ms
2025-11-20 08:26:29.465 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 08:26:29.488 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 23.9764ms
2025-11-20 08:27:32.464 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 08:27:33.150 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:27:33.192 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:27:33.205 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:27:33.221 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:27:33.240 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:27:33.656 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 08:27:34.106 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 08:27:34.107 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 08:27:34.122 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 08:27:34.209 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 08:27:34.211 +02:00 [INF] Hosting environment: Development
2025-11-20 08:27:34.214 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 08:27:35.354 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 08:27:35.722 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 381.1847ms
2025-11-20 08:27:35.778 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 08:27:35.778 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 08:27:35.796 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 20.1374ms
2025-11-20 08:27:35.844 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.2739ms
2025-11-20 08:27:35.872 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 08:27:35.896 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.3092ms
2025-11-20 08:28:14.978 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/api/v1/Transactions/2/status - null null
2025-11-20 08:28:15.005 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API)'
2025-11-20 08:28:15.032 +02:00 [INF] Route matched with {action = "GetTransactionStatus", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] GetTransactionStatus(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 08:28:15.319 +02:00 [INF] Executed DbCommand (73ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId], [s].[Id], [s].[CreatedAt], [s].[Name]
FROM [TransactionAttempts] AS [t]
INNER JOIN [Statuses] AS [s] ON [t].[StatusId] = [s].[Id]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 08:28:15.351 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 08:28:15.358 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API) in 320.8902ms
2025-11-20 08:28:15.361 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API)'
2025-11-20 08:28:15.365 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/api/v1/Transactions/2/status - 200 null text/plain; charset=utf-8 387.4575ms
2025-11-20 08:28:18.059 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/api/v1/Transactions/3/status - null null
2025-11-20 08:28:18.069 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API)'
2025-11-20 08:28:18.071 +02:00 [INF] Route matched with {action = "GetTransactionStatus", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] GetTransactionStatus(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 08:28:18.094 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId], [s].[Id], [s].[CreatedAt], [s].[Name]
FROM [TransactionAttempts] AS [t]
INNER JOIN [Statuses] AS [s] ON [t].[StatusId] = [s].[Id]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 08:28:18.104 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 08:28:18.106 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API) in 33.1121ms
2025-11-20 08:28:18.108 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API)'
2025-11-20 08:28:18.109 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/api/v1/Transactions/3/status - 200 null text/plain; charset=utf-8 51.3424ms
2025-11-20 08:28:19.810 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/api/v1/Transactions/1/status - null null
2025-11-20 08:28:19.817 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API)'
2025-11-20 08:28:19.818 +02:00 [INF] Route matched with {action = "GetTransactionStatus", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] GetTransactionStatus(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 08:28:19.833 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId], [s].[Id], [s].[CreatedAt], [s].[Name]
FROM [TransactionAttempts] AS [t]
INNER JOIN [Statuses] AS [s] ON [t].[StatusId] = [s].[Id]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 08:28:19.838 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 08:28:19.839 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API) in 16.9695ms
2025-11-20 08:28:19.841 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetTransactionStatus (TransactionRetrySystem.API)'
2025-11-20 08:28:19.842 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/api/v1/Transactions/1/status - 200 null text/plain; charset=utf-8 34.2418ms
2025-11-20 08:28:31.790 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/api/v1/Transactions/1/retry-history - null null
2025-11-20 08:28:31.800 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API)'
2025-11-20 08:28:31.806 +02:00 [INF] Route matched with {action = "GetRetryHistory", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[TransactionRetrySystem.Application.Dtos.Responses.RetryHistoryResponse]] GetRetryHistory(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 08:28:31.834 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__transactionId_0
ORDER BY [r].[RetryCount]
2025-11-20 08:28:31.915 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TransactionRetrySystem.Application.Dtos.Responses.RetryHistoryResponse, TransactionRetrySystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-20 08:28:31.928 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API) in 118.8564ms
2025-11-20 08:28:31.930 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API)'
2025-11-20 08:28:31.931 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/api/v1/Transactions/1/retry-history - 200 null application/json; charset=utf-8 141.5835ms
2025-11-20 08:28:38.130 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 08:28:38.142 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 08:28:38.149 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 08:28:42.420 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 08:30:39.270 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 08:30:39.992 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:30:40.033 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:30:40.051 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:30:40.065 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:30:40.079 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:30:40.422 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 08:30:40.912 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 08:30:40.914 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 08:30:40.984 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 08:30:41.052 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 08:30:41.054 +02:00 [INF] Hosting environment: Development
2025-11-20 08:30:41.056 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 08:30:41.571 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 08:30:41.838 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 281.6187ms
2025-11-20 08:30:41.885 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 08:30:41.885 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 08:30:41.899 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 14.6777ms
2025-11-20 08:30:41.951 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.5593ms
2025-11-20 08:30:41.980 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 08:30:41.997 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.7664ms
2025-11-20 08:30:56.385 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 08:30:56.400 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 08:30:56.428 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 08:30:56.632 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 08:31:10.702 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 08:31:10.711 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 14273.6041ms
2025-11-20 08:31:10.712 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 08:31:10.722 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 14337.4319ms
2025-11-20 08:32:11.694 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 08:32:12.386 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:32:12.426 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:32:12.443 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:32:12.456 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:32:12.467 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:32:12.774 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 08:32:13.164 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 08:32:13.166 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 08:32:13.239 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 08:32:13.289 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 08:32:13.290 +02:00 [INF] Hosting environment: Development
2025-11-20 08:32:13.292 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 08:32:39.743 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 08:32:45.251 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 5516.707ms
2025-11-20 08:32:45.281 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 08:32:45.310 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 08:32:45.310 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 08:32:45.326 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 16.7019ms
2025-11-20 08:32:45.373 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.331ms
2025-11-20 08:32:45.418 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 08:33:11.487 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26069.8169ms
2025-11-20 08:33:11.580 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 08:33:21.904 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 08:38:00.289 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 08:38:53.772 +02:00 [INF] Executed DbCommand (287ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 08:38:55.010 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [ErrorMessage] = @p2, [ErrorTypeId] = @p3, [StatusId] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-11-20 08:43:43.053 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 08:43:43.722 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:43:43.766 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:43:43.775 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:43:43.788 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:43:43.798 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 08:43:44.028 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 08:43:44.469 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 08:43:44.470 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 08:43:44.522 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 08:43:44.597 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 08:43:44.599 +02:00 [INF] Hosting environment: Development
2025-11-20 08:43:44.600 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 08:43:45.274 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 08:43:45.526 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 269.5808ms
2025-11-20 08:43:45.584 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 08:43:45.584 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 08:43:45.610 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 26.783ms
2025-11-20 08:43:45.647 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.8496ms
2025-11-20 08:43:45.676 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 08:43:45.700 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.4286ms
2025-11-20 09:07:21.357 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 09:07:22.010 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:07:22.046 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:07:22.056 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:07:22.071 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:07:22.083 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:07:22.329 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 09:07:22.755 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 09:07:22.757 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 09:07:22.835 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 09:07:22.966 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 09:07:22.969 +02:00 [INF] Hosting environment: Development
2025-11-20 09:07:22.970 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 09:07:24.191 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 09:07:24.459 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 280.4488ms
2025-11-20 09:07:24.472 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 09:07:24.482 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 10.4704ms
2025-11-20 09:07:24.504 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 09:07:24.563 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.0502ms
2025-11-20 09:07:24.604 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 09:07:24.622 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 18.6133ms
2025-11-20 09:07:34.047 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/api/v1/Transactions/1/retry-history - null null
2025-11-20 09:07:34.063 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API)'
2025-11-20 09:07:34.100 +02:00 [INF] Route matched with {action = "GetRetryHistory", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[TransactionRetrySystem.Application.Dtos.Responses.RetryHistoryResponse]] GetRetryHistory(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 09:07:34.361 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__transactionId_0
ORDER BY [r].[RetryCount]
2025-11-20 09:07:34.443 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TransactionRetrySystem.Application.Dtos.Responses.RetryHistoryResponse, TransactionRetrySystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-20 09:07:34.474 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API) in 366.6253ms
2025-11-20 09:07:34.477 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API)'
2025-11-20 09:07:34.481 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/api/v1/Transactions/1/retry-history - 200 null application/json; charset=utf-8 435.1643ms
2025-11-20 09:08:22.757 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 09:08:23.437 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:08:23.472 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:08:23.484 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:08:23.495 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:08:23.506 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:08:23.766 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 09:08:24.177 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 09:08:24.179 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 09:08:24.231 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 09:08:24.309 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 09:08:24.312 +02:00 [INF] Hosting environment: Development
2025-11-20 09:08:24.315 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 09:08:24.815 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 09:08:25.052 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 254.1633ms
2025-11-20 09:08:25.144 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 09:08:25.144 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 09:08:25.165 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 21.73ms
2025-11-20 09:08:25.203 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.3473ms
2025-11-20 09:08:25.232 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 09:08:25.256 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 23.9143ms
2025-11-20 09:08:38.843 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/api/v1/Transactions/1/retry-history - null null
2025-11-20 09:08:38.857 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API)'
2025-11-20 09:08:38.890 +02:00 [INF] Route matched with {action = "GetRetryHistory", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[TransactionRetrySystem.Application.Dtos.Responses.RetryHistoryResponse]] GetRetryHistory(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 09:08:39.186 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId], [s].[Id], [s].[CreatedAt], [s].[Name]
FROM [RetryQueue] AS [r]
INNER JOIN [Statuses] AS [s] ON [r].[StatusId] = [s].[Id]
WHERE [r].[TransactionId] = @__transactionId_0
ORDER BY [r].[RetryCount]
2025-11-20 09:08:39.282 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[TransactionRetrySystem.Application.Dtos.Responses.RetryHistoryResponse, TransactionRetrySystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-20 09:08:39.307 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API) in 410.9009ms
2025-11-20 09:08:39.310 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.GetRetryHistory (TransactionRetrySystem.API)'
2025-11-20 09:08:39.314 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/api/v1/Transactions/1/retry-history - 200 null application/json; charset=utf-8 471.8595ms
2025-11-20 09:09:00.552 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 09:09:00.563 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:09:00.574 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 09:09:00.622 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:09:04.137 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 09:09:04.142 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 3565.7359ms
2025-11-20 09:09:04.145 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:09:04.147 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 3594.7785ms
2025-11-20 09:09:05.682 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:10:30.636 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 09:10:30.652 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:10:30.653 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 09:10:30.673 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:12:10.048 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 09:12:10.071 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 99415.8862ms
2025-11-20 09:12:10.082 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:12:10.091 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 99455.8124ms
2025-11-20 09:12:12.673 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:13:12.514 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 09:13:12.519 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:13:12.521 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 09:13:16.055 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:13:17.883 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 09:13:19.089 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 6565.3673ms
2025-11-20 09:13:19.101 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:13:19.494 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 6981.0397ms
2025-11-20 09:13:20.714 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:13:23.311 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 09:14:14.197 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 09:15:07.136 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 09:15:33.330 +02:00 [INF] Executed DbCommand (1,962ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:15:39.005 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 09:21:12.193 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 09:21:12.212 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:21:12.214 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 09:21:12.256 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:21:12.267 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 09:21:13.861 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 1643.5732ms
2025-11-20 09:21:13.866 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:21:13.866 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:21:13.872 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 1680.432ms
2025-11-20 09:21:13.876 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 09:21:13.889 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 09:44:21.515 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 09:44:22.243 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:44:22.283 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:44:22.297 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:44:22.322 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:44:22.347 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:44:22.818 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 09:44:23.247 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 09:44:23.249 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 09:44:23.280 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 09:44:23.344 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 09:44:23.346 +02:00 [INF] Hosting environment: Development
2025-11-20 09:44:23.348 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 09:44:28.602 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 09:44:28.736 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:44:28.840 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 248.3402ms
2025-11-20 09:44:28.871 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 09:44:28.871 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 09:44:28.883 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 12.8391ms
2025-11-20 09:44:28.937 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.8253ms
2025-11-20 09:44:29.032 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 09:44:29.049 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.2912ms
2025-11-20 09:44:40.007 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 09:44:40.041 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:44:40.079 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 09:44:40.149 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:44:51.205 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 09:44:51.220 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 11130.5041ms
2025-11-20 09:44:51.221 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:44:51.226 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:44:51.228 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 11220.6235ms
2025-11-20 09:44:59.869 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 09:44:59.878 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:44:59.880 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 09:44:59.892 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:44:59.909 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 09:44:59.914 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 31.377ms
2025-11-20 09:44:59.915 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:45:00.761 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 892.4036ms
2025-11-20 09:45:02.098 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:45:54.828 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 09:45:55.457 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:45:55.503 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:45:55.516 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:45:55.528 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:45:55.542 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:45:55.844 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 09:45:56.260 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 09:45:56.262 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 09:45:56.332 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 09:45:56.539 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 09:45:56.541 +02:00 [INF] Hosting environment: Development
2025-11-20 09:45:56.542 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 09:46:02.610 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 09:46:02.835 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:46:02.919 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 319.8951ms
2025-11-20 09:46:05.201 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 09:46:05.201 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 09:46:06.297 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 1095.2472ms
2025-11-20 09:46:06.350 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 1149.1171ms
2025-11-20 09:46:06.402 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 09:46:06.427 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 09:46:12.221 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 5794.1878ms
2025-11-20 09:46:12.343 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 09:47:02.550 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 09:47:32.821 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 09:47:32.836 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:47:32.861 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 09:47:32.908 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:47:39.207 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 09:47:39.226 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 6352.2537ms
2025-11-20 09:47:39.243 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:47:39.243 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:47:39.258 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 6437.7388ms
2025-11-20 09:47:45.157 +02:00 [INF] Executed DbCommand (3,589ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 09:47:49.979 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 09:48:39.047 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 09:49:09.933 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 09:49:10.661 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:49:10.698 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:49:10.710 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:49:10.719 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:49:10.729 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 09:49:11.090 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 09:49:11.572 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 09:49:11.573 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 09:49:11.638 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 09:49:11.697 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 09:49:11.698 +02:00 [INF] Hosting environment: Development
2025-11-20 09:49:11.699 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 09:49:12.540 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 09:49:12.798 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 275.087ms
2025-11-20 09:49:12.859 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 09:49:12.859 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 09:49:12.887 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 27.7256ms
2025-11-20 09:49:12.931 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 72.5336ms
2025-11-20 09:49:12.961 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 09:49:12.984 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.0149ms
2025-11-20 09:49:28.556 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 09:49:28.578 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:49:28.606 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 09:49:28.827 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:49:29.072 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 09:49:29.082 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 465.2886ms
2025-11-20 09:49:29.085 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:49:29.091 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 535.2578ms
2025-11-20 09:49:36.264 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:49:36.341 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 09:49:36.461 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 09:49:49.456 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 09:49:53.039 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 09:49:53.046 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:49:53.048 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 09:49:54.800 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:49:54.810 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 09:49:54.814 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 1762.8711ms
2025-11-20 09:49:54.815 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:49:54.815 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:49:54.817 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 1778.797ms
2025-11-20 09:49:54.825 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 09:49:54.836 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 09:50:05.368 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 09:50:07.949 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 09:50:07.956 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:50:07.959 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 09:50:07.972 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:50:07.981 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 09:50:07.983 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 20.1048ms
2025-11-20 09:50:07.984 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:50:07.988 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:50:07.988 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 40.5978ms
2025-11-20 09:50:07.996 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 09:50:08.001 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 09:50:25.534 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 09:50:27.571 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 09:50:27.580 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:50:27.582 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 09:50:27.591 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:50:27.600 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 09:50:27.601 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 09:50:27.603 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 18.9347ms
2025-11-20 09:50:27.608 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 09:50:27.608 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 09:50:27.614 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 09:50:27.614 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 43.4409ms
2025-11-20 09:50:32.486 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:01:04.821 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 10:01:05.549 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:01:05.581 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:01:05.594 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:01:05.607 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:01:05.615 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:01:05.899 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 10:01:06.307 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 10:01:06.308 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 10:01:06.374 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 10:01:06.437 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 10:01:06.439 +02:00 [INF] Hosting environment: Development
2025-11-20 10:01:06.440 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 10:01:07.092 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 10:01:07.355 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 278.0991ms
2025-11-20 10:01:07.389 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 10:01:07.389 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 10:01:07.405 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 17.0016ms
2025-11-20 10:01:07.471 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 82.9324ms
2025-11-20 10:01:07.514 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 10:01:07.537 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.1609ms
2025-11-20 10:01:22.191 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:01:22.205 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:01:22.242 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:01:22.472 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:01:22.703 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:01:22.714 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 459.9784ms
2025-11-20 10:01:22.717 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:01:22.723 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 532.3354ms
2025-11-20 10:01:23.021 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:01:23.091 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:01:23.208 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:05:14.889 +02:00 [ERR] An error occurred using the connection to database 'TransactionRetrySystem' on server 'DESKTOP-8DBDUBG'.
2025-11-20 10:05:14.965 +02:00 [ERR] An error occurred using the connection to database 'TransactionRetrySystem' on server 'DESKTOP-8DBDUBG'.
2025-11-20 10:05:15.024 +02:00 [ERR] R-FAULT "rabbitmq://localhost/transaction-retry-queue" "44460000-7eaf-eee5-8803-08de280afefb" TransactionRetrySystem.Application.Dtos.Requests.RetryTransactionRequest TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer("00:03:52.2744133")
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at TransactionRetrySystem.Application.Services.TransactionRetryService.ProcessRetry(Int32 transactionId, Int32 attemptNumber, CancellationToken cancellationToken) in C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.Application\Services\TransactionRetryService.cs:line 174
   at TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer.Consume(ConsumeContext`1 context) in C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.Application\Services\MassTransit\RetryTransactionConsumer.cs:line 19
   at MassTransit.DependencyInjection.ScopeConsumerFactory`1.Send[TMessage](ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/DependencyInjection/DependencyInjection/ScopeConsumerFactory.cs:line 22
   at MassTransit.DependencyInjection.ScopeConsumerFactory`1.Send[TMessage](ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/DependencyInjection/DependencyInjection/ScopeConsumerFactory.cs:line 22
   at MassTransit.Middleware.ConsumerMessageFilter`2.MassTransit.IFilter<MassTransit.ConsumeContext<TMessage>>.Send(ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/Middleware/ConsumerMessageFilter.cs:line 48
2025-11-20 10:05:37.439 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:06:09.659 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 10:06:09.667 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:06:09.670 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:06:09.684 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:06:09.733 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:06:12.076 +02:00 [INF] Executed DbCommand (2,202ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:06:12.077 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:06:12.080 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 2408.65ms
2025-11-20 10:06:12.083 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:06:12.084 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 2424.7336ms
2025-11-20 10:06:12.092 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:06:37.627 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:06:52.088 +02:00 [INF] Executed DbCommand (373ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:06:55.404 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:06:56.243 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:07:06.666 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 10:07:06.671 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:07:06.672 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:07:06.686 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:07:06.697 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:07:06.700 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:07:06.701 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 26.9073ms
2025-11-20 10:07:06.706 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:07:06.707 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:07:06.707 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 41.5422ms
2025-11-20 10:07:06.718 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:07:17.209 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:07:21.132 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 10:07:21.140 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:07:21.142 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:07:22.533 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:07:22.541 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:07:22.544 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 1399.3935ms
2025-11-20 10:07:22.547 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:07:22.548 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:07:22.552 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 1420.3077ms
2025-11-20 10:07:24.227 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 10:07:24.236 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:07:24.237 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:07:24.248 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:07:24.254 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:07:24.259 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:07:24.259 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 19.2009ms
2025-11-20 10:07:24.265 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:07:24.267 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 40.1831ms
2025-11-20 10:08:52.580 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 10:08:53.222 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:08:53.257 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:08:53.270 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:08:53.281 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:08:53.292 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:08:53.553 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 10:08:54.011 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 10:08:54.013 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 10:08:54.061 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 10:08:54.134 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 10:08:54.136 +02:00 [INF] Hosting environment: Development
2025-11-20 10:08:54.137 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 10:08:54.681 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:08:54.780 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 10:08:55.055 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 290.8742ms
2025-11-20 10:08:55.099 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 10:08:55.099 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 10:08:55.126 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 26.8937ms
2025-11-20 10:08:55.165 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 67.0426ms
2025-11-20 10:08:55.196 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 10:08:55.216 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.676ms
2025-11-20 10:09:03.502 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:09:03.519 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:09:03.555 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:09:03.607 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:09:03.713 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:09:36.488 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 10:09:37.141 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:09:37.176 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:09:37.183 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:09:37.190 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:09:37.199 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:09:37.487 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 10:09:37.882 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 10:09:37.884 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 10:09:37.958 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 10:09:38.005 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 10:09:38.006 +02:00 [INF] Hosting environment: Development
2025-11-20 10:09:38.007 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 10:09:38.487 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 10:09:38.660 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:09:38.775 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 301.1427ms
2025-11-20 10:09:38.842 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:09:38.851 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 10:09:38.851 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 10:09:38.876 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 25.4914ms
2025-11-20 10:09:38.922 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.833ms
2025-11-20 10:09:38.981 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 10:09:39.001 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 21.2308ms
2025-11-20 10:09:39.018 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:09:42.472 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:09:50.039 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:09:50.058 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:09:50.094 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:09:50.167 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:09:50.294 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:09:50.298 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:09:50.300 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:09:50.307 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 203.9464ms
2025-11-20 10:09:50.312 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:09:50.313 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:09:52.264 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 2225.5101ms
2025-11-20 10:09:52.291 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:10:10.379 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 10:10:10.389 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:10:10.392 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:10:10.401 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:10:10.416 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:10:10.418 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 22.9832ms
2025-11-20 10:10:10.420 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:10:10.423 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:10:10.427 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 48.6297ms
2025-11-20 10:10:10.427 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:10:10.437 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:10:39.789 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 10:10:40.438 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:10:40.484 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:10:40.510 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:10:40.537 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:10:40.553 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:10:40.789 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 10:10:41.207 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 10:10:41.209 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 10:10:41.261 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 10:10:41.328 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 10:10:41.330 +02:00 [INF] Hosting environment: Development
2025-11-20 10:10:41.332 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 10:10:41.830 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:10:41.907 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 10:10:42.158 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 265.25ms
2025-11-20 10:10:42.193 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 10:10:42.193 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 10:10:42.208 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 15.8876ms
2025-11-20 10:10:42.248 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.9386ms
2025-11-20 10:10:42.331 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 10:10:42.351 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.9061ms
2025-11-20 10:11:05.048 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:11:05.067 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:11:05.100 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:11:05.158 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:11:05.300 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:11:05.307 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:11:05.313 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 204.7532ms
2025-11-20 10:11:05.315 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:11:05.320 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 271.6514ms
2025-11-20 10:11:05.383 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:11:05.511 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:11:12.645 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:11:24.532 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:11:29.799 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:11:29.806 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:11:29.807 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:11:29.816 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:11:29.831 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:11:29.836 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 25.5542ms
2025-11-20 10:11:29.837 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:11:29.839 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:11:29.840 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 42.4576ms
2025-11-20 10:11:29.845 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:11:29.856 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:11:42.740 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:11:43.191 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:12:39.594 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 10:12:40.243 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:12:40.284 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:12:40.295 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:12:40.308 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:12:40.318 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:12:40.607 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 10:12:41.067 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 10:12:41.069 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 10:12:41.124 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 10:12:41.192 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 10:12:41.194 +02:00 [INF] Hosting environment: Development
2025-11-20 10:12:41.196 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 10:12:41.741 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 10:12:41.986 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 260.0313ms
2025-11-20 10:12:42.031 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 10:12:42.032 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 10:12:42.047 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 16.4542ms
2025-11-20 10:12:42.096 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.1041ms
2025-11-20 10:12:42.126 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 10:12:42.145 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.4211ms
2025-11-20 10:12:46.019 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:12:46.032 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:12:46.069 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:12:46.282 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:12:46.509 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:12:46.516 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 439.7074ms
2025-11-20 10:12:46.519 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:12:46.526 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 507.9605ms
2025-11-20 10:12:46.802 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:12:46.882 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:12:46.981 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:12:53.485 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:12:55.544 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:12:55.554 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:12:58.942 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:13:02.657 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:13:02.664 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:13:02.668 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:13:02.686 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:13:02.700 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:13:02.703 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 30.8645ms
2025-11-20 10:13:02.705 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:13:02.710 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 54.0451ms
2025-11-20 10:13:02.710 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:13:02.726 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:13:02.737 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:13:06.414 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:13:13.285 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:13:13.292 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:13:13.294 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:13:13.313 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:13:13.320 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:13:13.324 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 27.7366ms
2025-11-20 10:13:13.324 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:13:13.326 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:13:13.330 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 45.6278ms
2025-11-20 10:13:15.588 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:13:15.594 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:13:15.598 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:13:15.608 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:13:15.617 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:13:15.620 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:13:15.620 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 19.0129ms
2025-11-20 10:13:15.625 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:13:15.626 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 38.0057ms
2025-11-20 10:13:19.323 +02:00 [INF] Executed DbCommand (2,663ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:13:19.330 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:13:23.913 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:13:29.072 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 10:13:29.077 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:13:29.080 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:13:29.085 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:13:29.100 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:13:29.101 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:13:29.105 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 23.1562ms
2025-11-20 10:13:29.107 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:13:29.107 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:13:29.108 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 38.3405ms
2025-11-20 10:13:29.117 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:13:51.273 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:13:54.858 +02:00 [INF] Executed DbCommand (1,320ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:13:59.953 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:14:01.155 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:14:05.699 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 10:14:05.706 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:14:05.708 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:14:05.718 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:14:05.733 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:14:05.735 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:14:05.739 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:14:05.739 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 25.9988ms
2025-11-20 10:14:05.744 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:14:05.746 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:14:07.695 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 1991.5026ms
2025-11-20 10:14:10.337 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:14:12.673 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:14:12.675 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:14:14.566 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:23:38.977 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 10:23:39.599 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:23:39.633 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:23:39.645 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:23:39.654 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:23:39.663 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:23:39.961 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 10:23:40.412 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 10:23:40.413 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 10:23:40.474 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 10:23:40.536 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 10:23:40.542 +02:00 [INF] Hosting environment: Development
2025-11-20 10:23:40.544 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 10:23:41.155 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 10:23:41.829 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 702.8781ms
2025-11-20 10:23:41.862 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 10:23:41.875 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 14.3553ms
2025-11-20 10:23:41.892 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 10:23:41.957 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.093ms
2025-11-20 10:23:42.008 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 10:23:42.034 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 27.2197ms
2025-11-20 10:23:50.508 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:23:50.522 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:23:50.548 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:23:50.781 +02:00 [INF] Executed DbCommand (67ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:23:50.986 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:23:50.991 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 436.7009ms
2025-11-20 10:23:50.993 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:23:51.001 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 493.3972ms
2025-11-20 10:23:51.724 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:23:51.785 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:23:51.906 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:24:33.024 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:24:36.688 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:24:47.904 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:24:49.178 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__8__locals1_transactionId_0 AND [r].[StatusId] = 3
ORDER BY [r].[ScheduledRetryTime]
2025-11-20 10:25:04.746 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:25:04.754 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:25:04.764 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:25:09.904 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:25:13.143 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:25:14.366 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__8__locals1_transactionId_0 AND [r].[StatusId] = 3
ORDER BY [r].[ScheduledRetryTime]
2025-11-20 10:25:18.397 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:25:19.132 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:25:19.149 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:25:24.671 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:25:25.809 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:25:25.814 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__8__locals1_transactionId_0 AND [r].[StatusId] = 3
ORDER BY [r].[ScheduledRetryTime]
2025-11-20 10:25:25.828 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:25:25.838 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:25:25.842 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:27:26.233 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 10:27:27.070 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:27:27.113 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:27:27.131 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:27:27.141 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:27:27.156 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:27:27.519 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 10:27:28.034 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 10:27:28.036 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 10:27:28.078 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 10:27:28.191 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 10:27:28.193 +02:00 [INF] Hosting environment: Development
2025-11-20 10:27:28.195 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 10:27:29.287 +02:00 [INF] Executed DbCommand (112ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:27:29.510 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:27:29.588 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 10:27:29.694 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:28:44.657 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 10:28:45.387 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:28:45.429 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:28:45.446 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:28:45.457 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:28:45.471 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:28:45.770 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 10:28:46.202 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 10:28:46.203 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 10:28:46.248 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 10:28:46.310 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 10:28:46.311 +02:00 [INF] Hosting environment: Development
2025-11-20 10:28:46.312 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 10:28:46.740 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:28:47.378 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 10:28:47.666 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 306.6719ms
2025-11-20 10:28:47.711 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 10:28:47.711 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 10:28:47.739 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 27.9422ms
2025-11-20 10:28:47.783 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.8928ms
2025-11-20 10:28:47.812 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 10:28:47.832 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 21.1913ms
2025-11-20 10:28:58.233 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:28:58.252 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:28:58.292 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:28:58.341 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:28:58.490 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:28:58.498 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:28:58.507 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 207.631ms
2025-11-20 10:28:58.510 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:28:58.513 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 281.1121ms
2025-11-20 10:29:33.469 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:29:33.488 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:29:33.490 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:29:33.529 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:29:33.545 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:29:33.549 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 57.397ms
2025-11-20 10:29:33.553 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:29:33.555 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:29:33.555 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 87.0934ms
2025-11-20 10:29:43.600 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 10:29:43.608 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:29:43.611 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:29:43.628 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:29:43.640 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:29:43.652 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 38.526ms
2025-11-20 10:29:43.654 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:29:43.655 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:29:43.658 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 58.9537ms
2025-11-20 10:29:43.728 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:29:43.836 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:30:00.281 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:30:02.162 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:31:56.397 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 10:31:57.023 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:31:57.067 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:31:57.084 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:31:57.104 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:31:57.128 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:31:57.425 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 10:31:57.822 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 10:31:57.823 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 10:31:57.876 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 10:31:57.918 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 10:31:57.919 +02:00 [INF] Hosting environment: Development
2025-11-20 10:31:57.921 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 10:31:58.340 +02:00 [INF] Executed DbCommand (60ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:31:58.525 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:31:58.726 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:32:05.752 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 10:32:11.231 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:32:11.253 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:32:11.381 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 5979.1578ms
2025-11-20 10:32:11.458 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 10:32:11.458 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 10:32:11.470 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 12.5169ms
2025-11-20 10:32:11.512 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.1085ms
2025-11-20 10:32:11.578 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 10:32:11.598 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.019ms
2025-11-20 10:32:21.816 +02:00 [INF] Executed DbCommand (1,434ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:32:22.376 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-11-20 10:32:23.548 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__8__locals1_transactionId_0 AND [r].[StatusId] = 3
ORDER BY [r].[ScheduledRetryTime]
2025-11-20 10:32:34.031 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:32:41.553 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 10:32:41.567 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:32:41.601 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:32:43.405 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:32:43.426 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:32:43.432 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:32:43.437 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 1830.0524ms
2025-11-20 10:32:43.438 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:32:43.440 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 1888.3998ms
2025-11-20 10:32:47.462 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 10:32:47.469 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:32:47.470 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:32:47.483 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:32:47.492 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:32:47.494 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:32:47.496 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 23.4131ms
2025-11-20 10:32:47.500 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:32:47.502 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 41.1221ms
2025-11-20 10:32:58.051 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 10:32:58.057 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:32:58.060 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:32:58.077 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:32:58.085 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:32:58.089 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:32:58.090 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 27.2806ms
2025-11-20 10:32:59.222 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:32:59.234 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 1183.4527ms
2025-11-20 10:33:02.650 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:33:03.691 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:33:07.940 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:33:07.950 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:33:14.308 +02:00 [INF] Executed DbCommand (248ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:33:16.563 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-11-20 10:33:24.270 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__8__locals1_transactionId_0 AND [r].[StatusId] = 3
ORDER BY [r].[ScheduledRetryTime]
2025-11-20 10:33:26.669 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:33:36.126 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 10:33:36.137 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:33:36.139 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:33:37.500 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:33:37.516 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:33:37.517 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:33:38.888 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 2746.5394ms
2025-11-20 10:33:38.900 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:33:38.903 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 2777.2487ms
2025-11-20 10:33:40.192 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:33:42.311 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:33:51.843 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:33:51.859 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:34:59.167 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 10:34:59.830 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:34:59.873 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:34:59.889 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:34:59.903 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:34:59.918 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:35:00.175 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 10:35:00.579 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 10:35:00.581 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 10:35:00.660 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 10:35:00.713 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 10:35:00.716 +02:00 [INF] Hosting environment: Development
2025-11-20 10:35:00.718 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 10:35:01.229 +02:00 [INF] Executed DbCommand (71ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:01.448 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:35:01.555 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 10:35:01.640 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:35:06.014 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:35:06.026 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 4487.8955ms
2025-11-20 10:35:06.071 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:35:06.151 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 10:35:06.151 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 10:35:06.162 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 12.2906ms
2025-11-20 10:35:06.206 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 56.636ms
2025-11-20 10:35:06.285 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 10:35:06.305 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.6558ms
2025-11-20 10:35:09.325 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:09.342 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-11-20 10:35:09.378 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__8__locals1_transactionId_0 AND [r].[StatusId] = 3
ORDER BY [r].[ScheduledRetryTime]
2025-11-20 10:35:09.399 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:13.123 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 10:35:13.137 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:35:13.172 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:35:13.199 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:13.221 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:13.228 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:35:13.230 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:35:13.235 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:35:13.240 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 60.5126ms
2025-11-20 10:35:15.951 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:35:15.961 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 2838.994ms
2025-11-20 10:35:19.552 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:35:19.561 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:35:22.628 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:22.634 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-11-20 10:35:22.637 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__8__locals1_transactionId_0 AND [r].[StatusId] = 3
ORDER BY [r].[ScheduledRetryTime]
2025-11-20 10:35:22.644 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:29.662 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 10:35:29.674 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:35:29.676 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:35:29.684 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:29.699 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:29.701 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:35:29.705 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 26.653ms
2025-11-20 10:35:29.707 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:35:29.709 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 47.7236ms
2025-11-20 10:35:30.404 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 10:35:30.410 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:35:30.412 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:35:30.418 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:30.430 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:30.431 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:35:30.435 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 21.1558ms
2025-11-20 10:35:30.438 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:35:30.439 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 36.6144ms
2025-11-20 10:35:33.640 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:35:33.645 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:35:33.646 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:35:33.651 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:33.663 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:33.664 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:35:33.669 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:35:33.670 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 21.6032ms
2025-11-20 10:35:33.675 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:35:33.675 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:35:34.918 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 1279.6995ms
2025-11-20 10:35:37.907 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:35:37.918 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:35:42.183 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:42.191 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-11-20 10:35:42.196 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__8__locals1_transactionId_0 AND [r].[StatusId] = 3
ORDER BY [r].[ScheduledRetryTime]
2025-11-20 10:35:48.344 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:49.729 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:35:49.735 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:35:49.737 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:35:49.744 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:49.757 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:49.758 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:35:49.763 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 23.9737ms
2025-11-20 10:35:49.765 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:35:49.769 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 40.2817ms
2025-11-20 10:35:50.175 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:35:50.183 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:35:50.185 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:35:50.190 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:50.200 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:35:50.202 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:50.204 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 17.6174ms
2025-11-20 10:35:50.209 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:35:50.210 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 36.2983ms
2025-11-20 10:35:50.346 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:35:50.354 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:35:50.356 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:35:50.361 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:50.373 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:35:50.374 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:35:50.379 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 20.3957ms
2025-11-20 10:35:50.380 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:35:50.382 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 35.6441ms
2025-11-20 10:36:22.260 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 10:36:22.849 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:36:22.894 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:36:22.904 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:36:22.912 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:36:22.924 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:36:23.181 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 10:36:23.547 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 10:36:23.549 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 10:36:23.589 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 10:36:23.647 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 10:36:23.648 +02:00 [INF] Hosting environment: Development
2025-11-20 10:36:23.649 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 10:36:24.255 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 10:36:24.505 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 265.287ms
2025-11-20 10:36:24.558 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 10:36:24.558 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 10:36:24.575 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 17.6919ms
2025-11-20 10:36:24.614 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 56.5684ms
2025-11-20 10:36:24.645 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 10:36:24.669 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 25.3014ms
2025-11-20 10:36:28.037 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:36:28.051 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:36:28.083 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:36:28.284 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:36:28.518 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:36:28.526 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 435.4144ms
2025-11-20 10:36:28.529 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:36:28.535 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 498.8992ms
2025-11-20 10:36:28.848 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:36:28.920 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:36:29.034 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:36:38.796 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:36:38.815 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptNumber] = @p0, [AttemptedAt] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:36:40.618 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:36:40.630 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:36:40.633 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:36:40.649 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:36:40.660 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:36:40.662 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 26.8153ms
2025-11-20 10:36:40.665 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:36:40.666 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:36:40.672 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 53.8254ms
2025-11-20 10:36:40.673 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:36:40.684 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:36:44.921 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-11-20 10:36:44.935 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:36:44.940 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__8__locals1_transactionId_0 AND [r].[StatusId] = 3
ORDER BY [r].[ScheduledRetryTime]
2025-11-20 10:36:44.940 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:36:44.953 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:36:44.958 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:36:44.993 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-11-20 10:36:44.993 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:36:45.855 +02:00 [INF] Executed DbCommand (847ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:36:45.864 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__8__locals1_transactionId_0 AND [r].[StatusId] = 3
ORDER BY [r].[ScheduledRetryTime]
2025-11-20 10:36:45.865 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:36:45.873 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:36:48.020 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:36:48.020 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:36:48.025 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-11-20 10:36:48.030 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:36:48.670 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:36:48.730 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:36:57.737 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:36:57.738 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-11-20 10:36:57.762 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:36:57.779 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:36:57.792 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__8__locals1_transactionId_0 AND [r].[StatusId] = 3
ORDER BY [r].[ScheduledRetryTime]
2025-11-20 10:36:57.795 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:36:57.851 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:36:57.855 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:36:57.857 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:36:59.197 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:37:01.566 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:37:01.569 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-11-20 10:37:02.127 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:37:02.104 +02:00 [INF] Executed DbCommand (529ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:37:02.143 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-11-20 10:37:02.139 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:37:02.143 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-11-20 10:37:02.153 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__8__locals1_transactionId_0 AND [r].[StatusId] = 3
ORDER BY [r].[ScheduledRetryTime]
2025-11-20 10:37:03.277 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:37:02.136 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedAt], [r].[RetryCount], [r].[ScheduledRetryTime], [r].[StatusId], [r].[TransactionId]
FROM [RetryQueue] AS [r]
WHERE [r].[TransactionId] = @__8__locals1_transactionId_0 AND [r].[StatusId] = 3
ORDER BY [r].[ScheduledRetryTime]
2025-11-20 10:37:02.147 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:37:05.930 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:37:05.943 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-11-20 10:37:05.942 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:37:06.723 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:37:05.939 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:37:09.183 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:37:09.190 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:37:05.950 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:37:09.241 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:37:09.241 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 10:37:09.291 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:37:02.156 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorTypeId] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 10:37:10.061 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:49:03.794 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 10:49:04.574 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:49:04.607 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:49:04.618 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:49:04.629 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:49:04.641 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 10:49:04.961 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 10:49:05.444 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 10:49:05.446 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 10:49:05.498 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 10:49:05.573 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 10:49:05.574 +02:00 [INF] Hosting environment: Development
2025-11-20 10:49:05.577 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 10:49:06.384 +02:00 [INF] Executed DbCommand (59ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:49:06.384 +02:00 [INF] Executed DbCommand (87ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:49:06.384 +02:00 [INF] Executed DbCommand (83ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:49:06.384 +02:00 [INF] Executed DbCommand (101ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:49:06.384 +02:00 [INF] Executed DbCommand (93ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:49:06.384 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:49:06.384 +02:00 [INF] Executed DbCommand (78ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:49:06.384 +02:00 [INF] Executed DbCommand (94ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:49:06.562 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:49:06.562 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:49:06.563 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:49:06.564 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:49:06.565 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:49:06.566 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:49:06.566 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:49:06.567 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:49:06.917 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 10:49:07.233 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 330.6724ms
2025-11-20 10:49:07.366 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 10:49:07.366 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 10:49:07.383 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 17.414ms
2025-11-20 10:49:07.435 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.2178ms
2025-11-20 10:49:07.469 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 10:49:07.492 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 23.5983ms
2025-11-20 10:49:11.220 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:49:11.236 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:49:11.271 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:49:31.036 +02:00 [INF] Executed DbCommand (7,650ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:49:31.040 +02:00 [INF] Executed DbCommand (24,326ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:49:31.042 +02:00 [INF] Executed DbCommand (24,327ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:49:31.050 +02:00 [INF] Executed DbCommand (24,336ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:49:31.056 +02:00 [INF] Executed DbCommand (24,342ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:49:31.054 +02:00 [INF] Executed DbCommand (24,340ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:49:31.045 +02:00 [INF] Executed DbCommand (24,331ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:49:31.054 +02:00 [INF] Executed DbCommand (24,340ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:49:31.049 +02:00 [INF] Executed DbCommand (24,335ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:49:49.519 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:49:49.543 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:49:49.572 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:49:49.572 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:49:49.592 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:49:49.585 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:49:49.583 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:49:49.572 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 10:49:49.651 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:49:49.658 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:49:49.661 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:49:49.664 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:49:50.968 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 38391.1718ms
2025-11-20 10:49:50.982 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:49:52.822 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 41602.2142ms
2025-11-20 10:49:52.872 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:49:57.480 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:49:57.488 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:49:57.491 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:49:57.503 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:49:57.517 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:49:57.518 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:49:57.520 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 26.8575ms
2025-11-20 10:49:57.524 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:49:57.525 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:49:57.527 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 48.2391ms
2025-11-20 10:49:57.534 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:50:00.186 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:50:02.080 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:50:02.089 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:50:02.090 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:50:02.098 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:50:02.105 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:50:02.108 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:50:02.108 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 15.4811ms
2025-11-20 10:50:02.110 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:50:02.111 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:50:02.112 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 33.387ms
2025-11-20 10:50:02.117 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:50:04.887 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:50:04.894 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:50:04.906 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:50:07.308 +02:00 [INF] Executed DbCommand (2,387ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:50:08.540 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:50:08.563 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:50:10.217 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 5309.332ms
2025-11-20 10:50:10.879 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:50:10.919 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 6030.3841ms
2025-11-20 10:50:15.348 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:50:17.208 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:50:17.215 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:50:17.216 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:50:17.222 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:50:17.234 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:50:17.234 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:50:17.239 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:50:17.239 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 22.0114ms
2025-11-20 10:50:17.245 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:50:17.247 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:50:17.248 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 40.9786ms
2025-11-20 10:50:20.721 +02:00 [INF] Executed DbCommand (757ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 10:50:22.076 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 10:50:22.083 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:50:22.085 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 10:50:22.096 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:50:22.106 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 10:50:22.110 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 22.4859ms
2025-11-20 10:50:22.111 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 10:50:22.113 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 10:50:22.118 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 42.0934ms
2025-11-20 10:50:22.121 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 10:50:22.127 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:01:05.691 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 11:01:06.485 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:01:06.527 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:01:06.544 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:01:06.559 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:01:06.575 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:01:06.884 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 11:01:07.371 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 11:01:07.373 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 11:01:07.395 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 11:01:07.507 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 11:01:07.509 +02:00 [INF] Hosting environment: Development
2025-11-20 11:01:07.513 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 11:01:08.243 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 11:01:08.674 +02:00 [INF] Executed DbCommand (97ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:01:08.681 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 456.5819ms
2025-11-20 11:01:08.726 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 11:01:08.726 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 11:01:08.741 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 15.6073ms
2025-11-20 11:01:08.799 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.8977ms
2025-11-20 11:01:08.830 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 11:01:08.849 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 19.6741ms
2025-11-20 11:01:08.894 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:01:09.029 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:01:18.265 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 11:01:28.274 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 11:01:28.296 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:01:28.331 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 11:01:28.386 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:01:28.511 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:01:28.519 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 11:01:28.522 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:01:28.528 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 186.2013ms
2025-11-20 11:01:28.533 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:01:28.536 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:01:39.167 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 10892.146ms
2025-11-20 11:01:52.174 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 11:01:54.565 +02:00 [INF] Executed DbCommand (1,184ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:01:54.690 +02:00 [INF] Executed DbCommand (65ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 11:01:59.340 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 11:01:59.347 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:01:59.350 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 11:01:59.369 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:01:59.380 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 11:01:59.385 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 31.9294ms
2025-11-20 11:01:59.385 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:01:59.387 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:01:59.391 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 52.1335ms
2025-11-20 11:01:59.395 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:01:59.414 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:02:06.970 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:02:06.971 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:02:07.838 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 11:02:09.787 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 11:02:09.795 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:02:09.796 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 11:02:09.812 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:02:09.819 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 11:02:09.822 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 23.1173ms
2025-11-20 11:02:09.824 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:02:09.824 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:02:09.825 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 40.665ms
2025-11-20 11:06:25.833 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 11:06:26.555 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:06:26.591 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:06:26.600 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:06:26.610 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:06:26.620 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:06:26.927 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 11:06:27.427 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 11:06:27.429 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 11:06:27.472 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 11:06:27.526 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 11:06:27.527 +02:00 [INF] Hosting environment: Development
2025-11-20 11:06:27.528 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 11:06:28.057 +02:00 [INF] Executed DbCommand (98ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:06:28.334 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 11:06:28.601 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 280.0018ms
2025-11-20 11:06:28.649 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 11:06:28.649 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 11:06:28.663 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 15.0332ms
2025-11-20 11:06:28.710 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.0451ms
2025-11-20 11:06:28.739 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 11:06:28.757 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 18.7045ms
2025-11-20 11:06:59.724 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 11:06:59.750 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:06:59.778 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 11:06:59.819 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:06:59.938 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:06:59.950 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 11:06:59.955 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 171.6771ms
2025-11-20 11:06:59.958 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:06:59.959 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 235.6403ms
2025-11-20 11:07:00.008 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:07:00.113 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:07:14.454 +02:00 [ERR] Failed executing DbCommand (40ms) [Parameters=[@__gateway_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[FailureCount], [c].[Gateway], [c].[LastFailureTime], [c].[State]
FROM [CircuitBreakerStates] AS [c]
WHERE [c].[Gateway] = @__gateway_0
2025-11-20 11:07:14.489 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'TransactionRetrySystem.Infrastructure.Context.AppDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-20 11:07:14.492 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'TransactionRetrySystem.Infrastructure.Context.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'State'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:e1eebc08-5849-4067-9a30-bc2877adbeeb
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'State'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:e1eebc08-5849-4067-9a30-bc2877adbeeb
Error Number:207,State:1,Class:16
2025-11-20 11:08:54.779 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 11:08:55.336 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:08:55.367 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:08:55.381 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:08:55.391 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:08:55.400 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:08:55.686 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 11:08:56.089 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 11:08:56.090 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 11:08:56.133 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 11:08:56.194 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 11:08:56.195 +02:00 [INF] Hosting environment: Development
2025-11-20 11:08:56.196 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 11:08:56.674 +02:00 [INF] Executed DbCommand (83ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:08:57.026 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 11:08:57.296 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 292.7922ms
2025-11-20 11:08:57.306 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 11:08:57.318 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 11.8117ms
2025-11-20 11:08:57.320 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 11:08:57.386 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.7879ms
2025-11-20 11:08:57.418 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 11:08:57.441 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.1599ms
2025-11-20 11:09:21.628 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 11:09:21.641 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:09:21.674 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 11:09:21.724 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:09:21.870 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 11:09:21.871 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:09:21.880 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 196.5748ms
2025-11-20 11:09:21.883 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:09:21.886 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 258.5037ms
2025-11-20 11:09:21.955 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:09:22.083 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:09:50.598 +02:00 [ERR] Failed executing DbCommand (37ms) [Parameters=[@__gateway_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[FailureCount], [c].[Gateway], [c].[LastFailureTime], [c].[State]
FROM [CircuitBreakerStates] AS [c]
WHERE [c].[Gateway] = @__gateway_0
2025-11-20 11:09:50.621 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'TransactionRetrySystem.Infrastructure.Context.AppDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-20 11:09:50.622 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'TransactionRetrySystem.Infrastructure.Context.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'State'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9f45b0ff-38c3-4360-93d3-a6344a8fa4fc
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'State'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9f45b0ff-38c3-4360-93d3-a6344a8fa4fc
Error Number:207,State:1,Class:16
2025-11-20 11:11:06.752 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 11:11:06.845 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 11:11:15.330 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 11:11:15.565 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-20 11:11:15.578 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-20 11:11:15.580 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-20 11:11:15.623 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-20 11:11:15.625 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-20 11:11:15.626 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-20 11:11:15.629 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-20 11:11:15.637 +02:00 [INF] Applying migration '20251120091107_InitialMigration'.
2025-11-20 11:11:15.673 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CircuitBreakerStates] (
    [Id] int NOT NULL IDENTITY,
    [Gateway] nvarchar(max) NULL,
    [State] nvarchar(max) NULL,
    [FailureCount] int NOT NULL,
    [LastFailureTime] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_CircuitBreakerStates] PRIMARY KEY ([Id])
);
2025-11-20 11:11:15.675 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ErrorTypes] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_ErrorTypes] PRIMARY KEY ([Id])
);
2025-11-20 11:11:15.678 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Statuses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Statuses] PRIMARY KEY ([Id])
);
2025-11-20 11:11:15.681 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-11-20 11:11:15.686 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RetryQueue] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ScheduledRetryTime] datetime2 NOT NULL,
    [RetryCount] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_RetryQueue] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RetryQueue_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE
);
2025-11-20 11:11:15.692 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Transactions] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Gateway] nvarchar(max) NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Transactions_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-20 11:11:15.700 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TransactionAttempts] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [AttemptNumber] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [AttemptedAt] datetime2 NOT NULL,
    [ResponseTime] time NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_TransactionAttempts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TransactionAttempts_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Transactions_TransactionId] FOREIGN KEY ([TransactionId]) REFERENCES [Transactions] ([Id]) ON DELETE NO ACTION
);
2025-11-20 11:11:15.999 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RetryQueue_StatusId] ON [RetryQueue] ([StatusId]);
2025-11-20 11:11:16.001 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_ErrorTypeId] ON [TransactionAttempts] ([ErrorTypeId]);
2025-11-20 11:11:16.002 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_StatusId] ON [TransactionAttempts] ([StatusId]);
2025-11-20 11:11:16.003 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_TransactionId] ON [TransactionAttempts] ([TransactionId]);
2025-11-20 11:11:16.005 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_ErrorTypeId] ON [Transactions] ([ErrorTypeId]);
2025-11-20 11:11:16.006 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_StatusId] ON [Transactions] ([StatusId]);
2025-11-20 11:11:16.007 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_UserId] ON [Transactions] ([UserId]);
2025-11-20 11:11:16.010 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251120091107_InitialMigration', N'8.0.0');
2025-11-20 11:11:35.099 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 11:11:35.701 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:11:36.026 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Statuses] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4),
(@p10, @p11, 5)) AS i ([CreatedAt], [Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Name])
VALUES (i.[CreatedAt], i.[Name])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 11:11:36.067 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:11:36.105 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [ErrorTypes] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4),
(@p10, @p11, 5),
(@p12, @p13, 6),
(@p14, @p15, 7),
(@p16, @p17, 8),
(@p18, @p19, 9)) AS i ([CreatedAt], [Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Name])
VALUES (i.[CreatedAt], i.[Name])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 11:11:36.116 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:11:36.153 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Users] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2)) AS i ([CreatedAt], [Email], [FullName], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Email], [FullName])
VALUES (i.[CreatedAt], i.[Email], i.[FullName])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 11:11:36.163 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:11:36.273 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2)) AS i ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorTypeId], [Gateway], [StatusId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorTypeId], [Gateway], [StatusId], [UserId])
VALUES (i.[Amount], i.[CreatedAt], i.[Currency], i.[Description], i.[ErrorMessage], i.[ErrorTypeId], i.[Gateway], i.[StatusId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 11:11:36.286 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:11:36.363 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Time), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Time), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (DbType = DateTime2), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Time), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [TransactionAttempts] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, 0),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, 1),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 2)) AS i ([AttemptNumber], [AttemptedAt], [CreatedAt], [ErrorMessage], [ErrorTypeId], [GatewayResponse], [ResponseTime], [StatusId], [TransactionId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AttemptNumber], [AttemptedAt], [CreatedAt], [ErrorMessage], [ErrorTypeId], [GatewayResponse], [ResponseTime], [StatusId], [TransactionId], [UserId])
VALUES (i.[AttemptNumber], i.[AttemptedAt], i.[CreatedAt], i.[ErrorMessage], i.[ErrorTypeId], i.[GatewayResponse], i.[ResponseTime], i.[StatusId], i.[TransactionId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 11:11:36.653 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 11:11:37.097 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 11:11:37.099 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 11:11:37.181 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 11:11:37.198 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 11:11:37.200 +02:00 [INF] Hosting environment: Development
2025-11-20 11:11:37.202 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 11:11:37.685 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 11:11:37.787 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:11:37.895 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:11:37.930 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:11:42.111 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 11:11:42.111 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 11:11:42.112 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 4445.4ms
2025-11-20 11:11:42.126 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 15.9837ms
2025-11-20 11:11:42.163 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.8313ms
2025-11-20 11:11:42.214 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__gateway_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[FailureCount], [c].[Gateway], [c].[LastFailureTime], [c].[State]
FROM [CircuitBreakerStates] AS [c]
WHERE [c].[Gateway] = @__gateway_0
2025-11-20 11:11:42.244 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 11:11:42.274 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 30.4741ms
2025-11-20 11:11:42.284 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'TransactionRetrySystem.Infrastructure.Context.AppDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-20 11:11:42.343 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p9='?' (DbType = Int32), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CircuitBreakerStates] ([CreatedAt], [FailureCount], [Gateway], [LastFailureTime], [State])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p5, [ErrorMessage] = @p6, [ErrorTypeId] = @p7, [StatusId] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-11-20 11:15:03.072 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 11:15:03.278 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-20 11:15:03.293 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-20 11:15:03.295 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-20 11:15:03.341 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-20 11:15:03.343 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-20 11:15:03.344 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-20 11:15:03.351 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-20 11:15:03.361 +02:00 [INF] Applying migration '20251120091107_InitialMigration'.
2025-11-20 11:15:03.392 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CircuitBreakerStates] (
    [Id] int NOT NULL IDENTITY,
    [Gateway] nvarchar(max) NULL,
    [State] nvarchar(max) NULL,
    [FailureCount] int NOT NULL,
    [LastFailureTime] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_CircuitBreakerStates] PRIMARY KEY ([Id])
);
2025-11-20 11:15:03.394 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ErrorTypes] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_ErrorTypes] PRIMARY KEY ([Id])
);
2025-11-20 11:15:03.398 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Statuses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Statuses] PRIMARY KEY ([Id])
);
2025-11-20 11:15:03.402 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-11-20 11:15:03.407 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RetryQueue] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ScheduledRetryTime] datetime2 NOT NULL,
    [RetryCount] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_RetryQueue] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RetryQueue_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE
);
2025-11-20 11:15:03.410 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Transactions] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Gateway] nvarchar(max) NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Transactions_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-20 11:15:03.415 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TransactionAttempts] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [AttemptNumber] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [AttemptedAt] datetime2 NOT NULL,
    [ResponseTime] time NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_TransactionAttempts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TransactionAttempts_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Transactions_TransactionId] FOREIGN KEY ([TransactionId]) REFERENCES [Transactions] ([Id]) ON DELETE NO ACTION
);
2025-11-20 11:15:03.503 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RetryQueue_StatusId] ON [RetryQueue] ([StatusId]);
2025-11-20 11:15:03.505 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_ErrorTypeId] ON [TransactionAttempts] ([ErrorTypeId]);
2025-11-20 11:15:03.506 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_StatusId] ON [TransactionAttempts] ([StatusId]);
2025-11-20 11:15:03.515 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_TransactionId] ON [TransactionAttempts] ([TransactionId]);
2025-11-20 11:15:03.516 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_ErrorTypeId] ON [Transactions] ([ErrorTypeId]);
2025-11-20 11:15:03.518 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_StatusId] ON [Transactions] ([StatusId]);
2025-11-20 11:15:03.519 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_UserId] ON [Transactions] ([UserId]);
2025-11-20 11:15:03.521 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251120091107_InitialMigration', N'8.0.0');
2025-11-20 11:15:13.935 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 11:15:14.585 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:15:14.899 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Statuses] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4),
(@p10, @p11, 5)) AS i ([CreatedAt], [Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Name])
VALUES (i.[CreatedAt], i.[Name])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 11:15:14.957 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:15:15.017 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [ErrorTypes] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4),
(@p10, @p11, 5),
(@p12, @p13, 6),
(@p14, @p15, 7),
(@p16, @p17, 8),
(@p18, @p19, 9)) AS i ([CreatedAt], [Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Name])
VALUES (i.[CreatedAt], i.[Name])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 11:15:15.031 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:15:15.077 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Users] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2)) AS i ([CreatedAt], [Email], [FullName], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Email], [FullName])
VALUES (i.[CreatedAt], i.[Email], i.[FullName])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 11:15:15.091 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:15:15.171 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p28='?' (DbType = DateTime2), @p29='?' (Size = 4000), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (DbType = Int32), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p37='?' (DbType = DateTime2), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p40='?' (Size = 4000), @p41='?' (DbType = Int32), @p42='?' (Size = 4000), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32), @p45='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p46='?' (DbType = DateTime2), @p47='?' (Size = 4000), @p48='?' (Size = 4000), @p49='?' (Size = 4000), @p50='?' (DbType = Int32), @p51='?' (Size = 4000), @p52='?' (DbType = Int32), @p53='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2),
(@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 3),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 4),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, 5)) AS i ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorTypeId], [Gateway], [StatusId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorTypeId], [Gateway], [StatusId], [UserId])
VALUES (i.[Amount], i.[CreatedAt], i.[Currency], i.[Description], i.[ErrorMessage], i.[ErrorTypeId], i.[Gateway], i.[StatusId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 11:15:15.190 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:15:15.268 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Time), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Time), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (DbType = DateTime2), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Time), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [TransactionAttempts] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, 0),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, 1),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 2)) AS i ([AttemptNumber], [AttemptedAt], [CreatedAt], [ErrorMessage], [ErrorTypeId], [GatewayResponse], [ResponseTime], [StatusId], [TransactionId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AttemptNumber], [AttemptedAt], [CreatedAt], [ErrorMessage], [ErrorTypeId], [GatewayResponse], [ResponseTime], [StatusId], [TransactionId], [UserId])
VALUES (i.[AttemptNumber], i.[AttemptedAt], i.[CreatedAt], i.[ErrorMessage], i.[ErrorTypeId], i.[GatewayResponse], i.[ResponseTime], i.[StatusId], i.[TransactionId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 11:15:15.578 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 11:15:16.010 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 11:15:16.012 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 11:15:16.075 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 11:15:16.077 +02:00 [INF] Hosting environment: Development
2025-11-20 11:15:16.077 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 11:15:16.079 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 11:15:16.489 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:15:16.653 +02:00 [INF] Executed DbCommand (89ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:15:16.677 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:15:16.846 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gateway_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[FailureCount], [c].[Gateway], [c].[LastFailureTime], [c].[State]
FROM [CircuitBreakerStates] AS [c]
WHERE [c].[Gateway] = @__gateway_0
2025-11-20 11:15:16.932 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 11:15:51.226 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 11:15:51.882 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:15:51.920 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:15:51.930 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:15:51.942 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:15:51.952 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:15:52.177 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 11:15:52.575 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 11:15:52.577 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 11:15:52.648 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 11:15:52.687 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 11:15:52.688 +02:00 [INF] Hosting environment: Development
2025-11-20 11:15:52.690 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 11:15:53.129 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:15:53.296 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:15:53.450 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:15:53.645 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:15:53.766 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 11:15:54.023 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 274.3285ms
2025-11-20 11:15:54.064 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 11:15:54.064 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 11:15:54.090 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 27.3953ms
2025-11-20 11:15:54.129 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.3176ms
2025-11-20 11:15:54.160 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 11:15:54.178 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 18.4756ms
2025-11-20 11:16:43.157 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 11:16:43.173 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:16:43.207 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 11:16:43.253 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:16:43.384 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:16:43.386 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 11:16:43.392 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:16:43.393 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 178.6542ms
2025-11-20 11:16:43.398 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:16:43.400 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 242.8295ms
2025-11-20 11:16:43.406 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:16:45.912 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:16:47.718 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 11:16:47.727 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:16:47.730 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 11:16:47.740 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:16:47.759 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 11:16:47.761 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 27.0163ms
2025-11-20 11:16:47.763 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:16:47.765 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:16:47.766 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 49.3971ms
2025-11-20 11:16:47.771 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:16:47.779 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:16:54.035 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:17:01.218 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 11:17:01.223 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:17:01.225 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 11:17:05.250 +02:00 [INF] Executed DbCommand (4,020ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:17:05.265 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 11:17:05.265 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:17:05.266 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 4038.4149ms
2025-11-20 11:17:05.269 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:17:05.271 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 4053.553ms
2025-11-20 11:17:05.276 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:17:05.287 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:17:08.389 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:17:13.082 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 11:17:13.088 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:17:13.091 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 11:17:13.099 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:17:13.109 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 11:17:13.113 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 19.3486ms
2025-11-20 11:17:13.114 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:17:13.115 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:17:13.120 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 38.8835ms
2025-11-20 11:17:15.093 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 11:17:15.100 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:17:15.102 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 11:17:15.113 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:17:15.126 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:17:17.544 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 11:17:17.547 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 2443.1475ms
2025-11-20 11:17:17.551 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:17:17.551 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:17:17.552 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 2461.0264ms
2025-11-20 11:17:17.561 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:17:17.657 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 11:17:37.354 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 11:17:37.360 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:17:37.362 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 11:17:37.369 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:17:37.382 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 11:17:37.384 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:17:37.387 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 22.4988ms
2025-11-20 11:17:37.392 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:17:37.393 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:17:37.398 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:17:37.398 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 44.9949ms
2025-11-20 11:17:37.512 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:17:38.832 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 11:17:38.841 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:17:38.843 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 11:17:38.848 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:17:38.864 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 11:17:38.869 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:17:38.871 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 26.4609ms
2025-11-20 11:17:38.875 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:17:38.877 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 45.169ms
2025-11-20 11:17:40.698 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 11:17:40.709 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:17:40.714 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 11:17:40.723 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:17:40.734 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:17:40.735 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 11:17:40.739 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:17:40.740 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 23.3048ms
2025-11-20 11:17:40.746 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:17:40.746 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:17:40.751 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 53.6871ms
2025-11-20 11:17:40.838 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:18:36.361 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 11:18:36.971 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:18:37.009 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:18:37.017 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:18:37.025 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:18:37.035 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:18:37.314 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 11:18:37.739 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 11:18:37.746 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 11:18:37.813 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 11:18:37.856 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 11:18:37.858 +02:00 [INF] Hosting environment: Development
2025-11-20 11:18:37.859 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 11:18:38.821 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 11:18:39.069 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 264.6179ms
2025-11-20 11:18:39.112 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 11:18:39.112 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 11:18:39.129 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 17.2032ms
2025-11-20 11:18:39.181 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.3374ms
2025-11-20 11:18:39.209 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 11:18:39.227 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 18.9192ms
2025-11-20 11:18:44.787 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 11:18:44.800 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:18:44.832 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 11:18:45.049 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:18:45.291 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 11:18:45.299 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 460.8673ms
2025-11-20 11:18:45.304 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 11:18:45.311 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 525.0518ms
2025-11-20 11:18:45.567 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:18:45.623 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:18:45.727 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:18:51.905 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gateway_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[FailureCount], [c].[Gateway], [c].[LastFailureTime], [c].[State]
FROM [CircuitBreakerStates] AS [c]
WHERE [c].[Gateway] = @__gateway_0
2025-11-20 11:18:55.752 +02:00 [INF] Executed DbCommand (1,436ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:48:55.007 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 11:48:55.884 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:48:55.937 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:48:55.956 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:48:55.976 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:48:55.994 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 11:48:56.346 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 11:48:56.874 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 11:48:56.876 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 11:48:56.951 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 11:48:57.081 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 11:48:57.083 +02:00 [INF] Hosting environment: Development
2025-11-20 11:48:57.085 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 11:48:58.092 +02:00 [INF] Executed DbCommand (172ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 11:48:58.361 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 11:48:58.571 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:48:58.580 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 11:49:12.444 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__gateway_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[FailureCount], [c].[Gateway], [c].[LastFailureTime], [c].[State]
FROM [CircuitBreakerStates] AS [c]
WHERE [c].[Gateway] = @__gateway_0
2025-11-20 11:49:12.506 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 11:49:19.031 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CircuitBreakerStates] ([CreatedAt], [FailureCount], [Gateway], [LastFailureTime], [State])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 11:49:19.097 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 20535.6491ms
2025-11-20 11:49:19.189 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 11:49:19.189 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 11:49:19.202 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 13.0963ms
2025-11-20 11:49:19.254 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.4431ms
2025-11-20 11:49:19.324 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 11:49:19.340 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 16.4146ms
2025-11-20 12:02:57.063 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 12:02:57.321 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-20 12:02:57.335 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-20 12:02:57.336 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-20 12:02:57.384 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-20 12:02:57.386 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-20 12:02:57.387 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-20 12:02:57.396 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-20 12:02:57.404 +02:00 [INF] Applying migration '20251120091107_InitialMigration'.
2025-11-20 12:02:57.436 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CircuitBreakerStates] (
    [Id] int NOT NULL IDENTITY,
    [Gateway] nvarchar(max) NULL,
    [State] nvarchar(max) NULL,
    [FailureCount] int NOT NULL,
    [LastFailureTime] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_CircuitBreakerStates] PRIMARY KEY ([Id])
);
2025-11-20 12:02:57.441 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ErrorTypes] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_ErrorTypes] PRIMARY KEY ([Id])
);
2025-11-20 12:02:57.447 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Statuses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Statuses] PRIMARY KEY ([Id])
);
2025-11-20 12:02:57.453 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-11-20 12:02:57.458 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RetryQueue] (
    [Id] int NOT NULL IDENTITY,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ScheduledRetryTime] datetime2 NOT NULL,
    [RetryCount] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_RetryQueue] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RetryQueue_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE
);
2025-11-20 12:02:57.467 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Transactions] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Gateway] nvarchar(max) NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Transactions_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-20 12:02:57.474 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TransactionAttempts] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [TransactionId] int NOT NULL,
    [StatusId] int NOT NULL,
    [ErrorTypeId] int NOT NULL,
    [AttemptNumber] int NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [AttemptedAt] datetime2 NOT NULL,
    [ResponseTime] time NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_TransactionAttempts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TransactionAttempts_ErrorTypes_ErrorTypeId] FOREIGN KEY ([ErrorTypeId]) REFERENCES [ErrorTypes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Statuses_StatusId] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_TransactionAttempts_Transactions_TransactionId] FOREIGN KEY ([TransactionId]) REFERENCES [Transactions] ([Id]) ON DELETE NO ACTION
);
2025-11-20 12:02:57.478 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RetryQueue_StatusId] ON [RetryQueue] ([StatusId]);
2025-11-20 12:02:57.480 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_ErrorTypeId] ON [TransactionAttempts] ([ErrorTypeId]);
2025-11-20 12:02:58.104 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_StatusId] ON [TransactionAttempts] ([StatusId]);
2025-11-20 12:02:58.106 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TransactionAttempts_TransactionId] ON [TransactionAttempts] ([TransactionId]);
2025-11-20 12:02:58.107 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_ErrorTypeId] ON [Transactions] ([ErrorTypeId]);
2025-11-20 12:02:58.109 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_StatusId] ON [Transactions] ([StatusId]);
2025-11-20 12:02:58.111 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_UserId] ON [Transactions] ([UserId]);
2025-11-20 12:02:58.114 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251120091107_InitialMigration', N'8.0.0');
2025-11-20 12:03:10.626 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 12:03:11.345 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:03:11.635 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Statuses] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4),
(@p10, @p11, 5)) AS i ([CreatedAt], [Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Name])
VALUES (i.[CreatedAt], i.[Name])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 12:03:11.681 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:03:11.720 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [ErrorTypes] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4),
(@p10, @p11, 5),
(@p12, @p13, 6),
(@p14, @p15, 7),
(@p16, @p17, 8),
(@p18, @p19, 9)) AS i ([CreatedAt], [Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Name])
VALUES (i.[CreatedAt], i.[Name])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 12:03:11.743 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:03:11.783 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Users] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2)) AS i ([CreatedAt], [Email], [FullName], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Email], [FullName])
VALUES (i.[CreatedAt], i.[Email], i.[FullName])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 12:03:11.803 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:03:11.912 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = DateTime2), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 4000), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p28='?' (DbType = DateTime2), @p29='?' (Size = 4000), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (DbType = Int32), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p37='?' (DbType = DateTime2), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p40='?' (Size = 4000), @p41='?' (DbType = Int32), @p42='?' (Size = 4000), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Transactions] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2),
(@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 3),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 4)) AS i ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorTypeId], [Gateway], [StatusId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [CreatedAt], [Currency], [Description], [ErrorMessage], [ErrorTypeId], [Gateway], [StatusId], [UserId])
VALUES (i.[Amount], i.[CreatedAt], i.[Currency], i.[Description], i.[ErrorMessage], i.[ErrorTypeId], i.[Gateway], i.[StatusId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 12:03:11.927 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:03:11.996 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Time), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (DbType = Time), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = DateTime2), @p22='?' (DbType = DateTime2), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Time), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = DateTime2), @p32='?' (DbType = DateTime2), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = Time), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = DateTime2), @p42='?' (DbType = DateTime2), @p43='?' (Size = 4000), @p44='?' (DbType = Int32), @p45='?' (Size = 4000), @p46='?' (DbType = Time), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [TransactionAttempts] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, 0),
(@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, 1),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, 2),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 3),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 4)) AS i ([AttemptNumber], [AttemptedAt], [CreatedAt], [ErrorMessage], [ErrorTypeId], [GatewayResponse], [ResponseTime], [StatusId], [TransactionId], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AttemptNumber], [AttemptedAt], [CreatedAt], [ErrorMessage], [ErrorTypeId], [GatewayResponse], [ResponseTime], [StatusId], [TransactionId], [UserId])
VALUES (i.[AttemptNumber], i.[AttemptedAt], i.[CreatedAt], i.[ErrorMessage], i.[ErrorTypeId], i.[GatewayResponse], i.[ResponseTime], i.[StatusId], i.[TransactionId], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-20 12:03:12.293 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 12:03:12.826 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 12:03:12.829 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 12:03:12.881 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 12:03:12.909 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 12:03:12.910 +02:00 [INF] Hosting environment: Development
2025-11-20 12:03:12.912 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 12:03:14.082 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 12:03:14.389 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 323.4677ms
2025-11-20 12:03:14.434 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 12:03:14.434 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 12:03:14.458 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 24.8429ms
2025-11-20 12:03:14.498 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.1835ms
2025-11-20 12:03:14.530 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 12:03:14.554 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.9822ms
2025-11-20 12:03:32.900 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 12:03:32.915 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:03:32.954 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:03:33.142 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:03:33.321 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:03:33.329 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 365.0422ms
2025-11-20 12:03:33.333 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:03:33.339 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 439.2643ms
2025-11-20 12:03:33.685 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:03:33.788 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 12:03:33.810 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 12:04:29.100 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 12:04:55.795 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 12:04:56.357 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:05:01.763 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__gateway_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[FailureCount], [c].[Gateway], [c].[LastFailureTime], [c].[State]
FROM [CircuitBreakerStates] AS [c]
WHERE [c].[Gateway] = @__gateway_0
2025-11-20 12:05:03.022 +02:00 [INF] Executed DbCommand (836ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:05:05.517 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CircuitBreakerStates] ([CreatedAt], [FailureCount], [Gateway], [LastFailureTime], [State])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 12:05:50.701 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 12:05:50.718 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:05:50.720 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:05:50.749 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:05:50.782 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:05:52.603 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 1880.4557ms
2025-11-20 12:05:52.604 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:05:52.607 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 1906.8227ms
2025-11-20 12:05:52.611 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:07:26.476 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 12:07:27.143 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:07:27.177 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:07:27.191 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:07:27.203 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:07:27.216 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:07:27.481 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 12:07:27.939 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 12:07:27.940 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 12:07:27.986 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 12:07:28.041 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 12:07:28.042 +02:00 [INF] Hosting environment: Development
2025-11-20 12:07:28.043 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 12:07:29.124 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 12:07:29.401 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 293.8743ms
2025-11-20 12:07:29.413 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 12:07:29.424 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 12:07:29.424 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 11.3558ms
2025-11-20 12:07:29.489 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.0068ms
2025-11-20 12:07:29.521 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 12:07:29.544 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.1054ms
2025-11-20 12:07:59.850 +02:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Transaction'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-11-20 12:08:00.502 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:08:00.534 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ErrorTypes] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:08:00.546 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:08:00.553 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Transactions] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:08:00.559 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [TransactionAttempts] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-20 12:08:00.792 +02:00 [INF] Configured endpoint transaction-retry-queue, Consumer: TransactionRetrySystem.Application.Services.MassTransit.RetryTransactionConsumer
2025-11-20 12:08:01.187 +02:00 [INF] Now listening on: https://localhost:7106
2025-11-20 12:08:01.189 +02:00 [INF] Now listening on: http://localhost:5050
2025-11-20 12:08:01.257 +02:00 [INF] Bus started: "rabbitmq://localhost/"
2025-11-20 12:08:01.297 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-20 12:08:01.299 +02:00 [INF] Hosting environment: Development
2025-11-20 12:08:01.300 +02:00 [INF] Content root path: C:\Users\User\source\repos\TransactionRetrySystem\TransactionRetrySystem.API
2025-11-20 12:08:02.199 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 12:08:02.445 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 261.249ms
2025-11-20 12:08:02.494 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 12:08:02.494 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 12:08:02.514 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 19.7157ms
2025-11-20 12:08:02.553 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 58.7996ms
2025-11-20 12:08:02.582 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 12:08:02.607 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 25.2772ms
2025-11-20 12:08:06.623 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 12:08:06.638 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:06.673 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:08:06.898 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:07.128 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:08:07.138 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 457.319ms
2025-11-20 12:08:07.141 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:07.148 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 526.0525ms
2025-11-20 12:08:07.432 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:07.528 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 12:08:07.646 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 12:08:13.413 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 12:08:25.881 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 12:08:25.887 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:25.889 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:08:25.908 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:25.917 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:08:25.920 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 28.1389ms
2025-11-20 12:08:25.921 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:25.924 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:25.928 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 47.357ms
2025-11-20 12:08:25.937 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 12:08:25.945 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 12:08:26.004 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 12:08:35.582 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 12:08:35.591 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:35.592 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:08:35.600 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:35.614 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:08:35.626 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 31.6175ms
2025-11-20 12:08:35.627 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:35.630 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:35.630 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 49.1898ms
2025-11-20 12:08:35.637 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 12:08:35.644 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 12:08:35.703 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 12:08:36.398 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/index.html - null null
2025-11-20 12:08:36.415 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/index.html - 200 null text/html;charset=utf-8 17.0979ms
2025-11-20 12:08:36.441 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_vs/browserLink - null null
2025-11-20 12:08:36.442 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - null null
2025-11-20 12:08:36.463 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_framework/aspnetcore-browser-refresh.js - 200 16537 application/javascript; charset=utf-8 21.3618ms
2025-11-20 12:08:36.488 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.0403ms
2025-11-20 12:08:36.511 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - null null
2025-11-20 12:08:36.522 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7106/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.4698ms
2025-11-20 12:08:42.212 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/4/retry - null 0
2025-11-20 12:08:42.218 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:42.220 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:08:42.229 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:42.238 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:08:42.241 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:42.241 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 16.2694ms
2025-11-20 12:08:42.246 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 12:08:42.246 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:42.253 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/4/retry - 200 null text/plain; charset=utf-8 41.5202ms
2025-11-20 12:08:42.254 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 12:08:42.321 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 12:08:43.718 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/5/retry - null 0
2025-11-20 12:08:43.723 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:43.725 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:08:43.732 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:43.741 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:08:43.753 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:43.753 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 25.8329ms
2025-11-20 12:08:43.758 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 12:08:43.758 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:43.762 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 12:08:43.762 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/5/retry - 200 null text/plain; charset=utf-8 45.7082ms
2025-11-20 12:08:43.822 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 12:08:45.506 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 12:08:45.513 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:45.515 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:08:45.523 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:45.530 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:08:45.533 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:45.533 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 14.7539ms
2025-11-20 12:08:45.538 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:45.539 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 33.8949ms
2025-11-20 12:08:46.286 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:46.312 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 12:08:46.427 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:08:46.987 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 12:08:46.991 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:46.992 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:08:46.998 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:47.007 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:08:47.010 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:47.011 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 16.8762ms
2025-11-20 12:08:47.015 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:47.017 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 30.4715ms
2025-11-20 12:08:48.238 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 12:08:48.242 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:48.244 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:08:48.249 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:48.258 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:08:48.260 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 14.1078ms
2025-11-20 12:08:48.262 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:48.263 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:48.269 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 32.2504ms
2025-11-20 12:08:50.073 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/5/retry - null 0
2025-11-20 12:08:50.080 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:50.082 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:08:50.093 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:50.100 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:08:50.105 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 20.8184ms
2025-11-20 12:08:50.105 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:50.107 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:50.111 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/5/retry - 200 null text/plain; charset=utf-8 38.6317ms
2025-11-20 12:08:51.562 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 12:08:51.567 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:51.571 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:08:51.581 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:51.590 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:08:51.595 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 20.2188ms
2025-11-20 12:08:51.595 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:51.597 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:51.606 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 43.8109ms
2025-11-20 12:08:51.615 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 12:08:51.625 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 12:08:51.686 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 12:08:53.399 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/4/retry - null 0
2025-11-20 12:08:53.403 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:53.405 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:08:53.418 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:53.425 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:08:53.428 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 19.8378ms
2025-11-20 12:08:53.430 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:08:53.431 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:08:53.437 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/4/retry - 200 null text/plain; charset=utf-8 39.4139ms
2025-11-20 12:09:08.942 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - null 0
2025-11-20 12:09:08.947 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:09:08.948 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:09:08.957 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:09:08.964 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:09:08.969 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:09:08.969 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 17.7443ms
2025-11-20 12:09:08.973 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:09:08.975 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/1/retry - 200 null text/plain; charset=utf-8 33.4358ms
2025-11-20 12:09:13.966 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:09:13.971 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:09:14.066 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:09:22.047 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 12:09:22.051 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:09:22.053 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:09:22.060 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:09:22.071 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:09:22.073 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:09:22.074 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 17.4313ms
2025-11-20 12:09:22.077 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:09:22.078 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 31.3602ms
2025-11-20 12:09:26.985 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:09:26.987 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 12:09:27.089 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:09:42.865 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:09:42.869 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 12:09:42.918 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:09:52.102 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:09:52.103 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:09:52.173 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:09:57.738 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - null 0
2025-11-20 12:09:57.742 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:09:57.744 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:09:57.755 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:09:57.762 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:09:57.775 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:09:57.776 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 29.2325ms
2025-11-20 12:09:57.783 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:09:57.785 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/2/retry - 200 null text/plain; charset=utf-8 47.3158ms
2025-11-20 12:09:57.788 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 12:09:57.797 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 12:09:57.874 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 12:09:59.350 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 12:09:59.358 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:09:59.360 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:09:59.377 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:09:59.385 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:09:59.388 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:09:59.389 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 26.1322ms
2025-11-20 12:09:59.395 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:09:59.397 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 47.0481ms
2025-11-20 12:09:59.397 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 12:09:59.413 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 12:09:59.474 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 12:10:00.361 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/4/retry - null 0
2025-11-20 12:10:00.366 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:10:00.369 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:10:00.383 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:10:00.390 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:10:00.394 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 21.7617ms
2025-11-20 12:10:00.395 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:10:00.396 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:10:00.402 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/4/retry - 200 null text/plain; charset=utf-8 41.3171ms
2025-11-20 12:10:00.404 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 12:10:00.413 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 12:10:00.481 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 12:10:01.400 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/5/retry - null 0
2025-11-20 12:10:01.405 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:10:01.406 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:10:01.411 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:10:01.421 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:10:01.423 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:10:01.425 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 16.7053ms
2025-11-20 12:10:01.428 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:10:01.429 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/5/retry - 200 null text/plain; charset=utf-8 30.0001ms
2025-11-20 12:10:44.825 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:10:44.831 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [StatusId] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-11-20 12:10:44.900 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:10:56.535 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 12:10:56.541 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:10:56.543 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:10:56.550 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:10:56.557 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:10:56.564 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:10:56.569 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 22.4241ms
2025-11-20 12:10:56.574 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:10:56.575 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 41.1421ms
2025-11-20 12:10:57.501 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - null 0
2025-11-20 12:10:57.507 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:10:57.508 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:10:57.515 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:10:57.522 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:10:57.529 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:10:57.529 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 17.525ms
2025-11-20 12:10:57.537 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:10:57.538 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/3/retry - 200 null text/plain; charset=utf-8 37.7201ms
2025-11-20 12:10:58.069 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:10:58.074 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:10:58.162 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:10:58.720 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/4/retry - null 0
2025-11-20 12:10:58.725 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:10:58.726 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:10:58.732 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:10:58.741 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:10:58.746 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:10:58.749 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 19.1101ms
2025-11-20 12:10:58.756 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:10:58.757 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/4/retry - 200 null text/plain; charset=utf-8 38.0557ms
2025-11-20 12:10:59.856 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:10:59.862 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:10:59.969 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:11:00.428 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7106/api/v1/Transactions/5/retry - null 0
2025-11-20 12:11:00.436 +02:00 [INF] Executing endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:11:00.437 +02:00 [INF] Route matched with {action = "RetryTransaction", controller = "Transactions"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.String] RetryTransaction(Int32, System.Threading.CancellationToken) on controller TransactionRetrySystem.API.Controllers.TransactionsController (TransactionRetrySystem.API).
2025-11-20 12:11:00.442 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:11:00.452 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-11-20 12:11:00.454 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:11:00.456 +02:00 [INF] Executed action TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API) in 16.84ms
2025-11-20 12:11:00.460 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__transaction_UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [TransactionAttempts] AS [t]
WHERE [t].[UserId] = @__transaction_UserId_0 AND [t].[StatusId] = 5 AND [t].[AttemptedAt] >= DATEADD(hour, CAST(-1.0E0 AS int), GETUTCDATE())
2025-11-20 12:11:00.462 +02:00 [INF] Executed endpoint 'TransactionRetrySystem.API.Controllers.TransactionsController.RetryTransaction (TransactionRetrySystem.API)'
2025-11-20 12:11:00.467 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7106/api/v1/Transactions/5/retry - 200 null text/plain; charset=utf-8 39.9192ms
2025-11-20 12:11:00.470 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [StatusId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-11-20 12:11:08.203 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RetryQueue] ([CreatedAt], [RetryCount], [ScheduledRetryTime], [StatusId], [TransactionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-20 12:11:08.213 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:11:08.213 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:11:08.263 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:12:08.624 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__8__locals1_transactionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[AttemptNumber], [t].[AttemptedAt], [t].[CreatedAt], [t].[ErrorMessage], [t].[ErrorTypeId], [t].[GatewayResponse], [t].[ResponseTime], [t].[StatusId], [t].[TransactionId], [t].[UserId]
FROM [TransactionAttempts] AS [t]
WHERE [t].[TransactionId] = @__8__locals1_transactionId_0
ORDER BY [t].[AttemptedAt] DESC
2025-11-20 12:12:08.634 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-11-20 12:12:08.716 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [TransactionAttempts] SET [AttemptedAt] = @p0, [ErrorMessage] = @p1, [ErrorTypeId] = @p2, [StatusId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
